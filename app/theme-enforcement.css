/**
 * CRITICAL THEME ENFORCEMENT CSS
 * This file ensures complete theme application across ALL components
 * Load this AFTER all other stylesheets
 */

/* ═══════════════════════════════════════════════════════════
   FORCE THEME VARIABLES ON EVERYTHING
   ═══════════════════════════════════════════════════════════ */

/* Reset all colors to inherit theme */
/* Exclude images, canvas, and radar containers from color inheritance */
*:not(img):not(canvas):not(video):not(svg) {
  /* Remove any inline color styles */
  color: inherit !important;
  border-color: inherit !important;
}

/* Explicitly exclude radar containers and their children from color inheritance */
[data-radar-container],
[data-radar-container] *,
[class*="map"],
[class*="Map"],
[class*="radar"],
[class*="Radar"] {
  color: unset !important;
  border-color: unset !important;
}

/* Force backgrounds on all elements */
html, body, #__next, #root, .app, main {
  background-color: var(--bg) !important;
  color: var(--text) !important;
}

/* Weather component specific overrides */
[class*="weather"], [class*="Weather"],
[class*="forecast"], [class*="Forecast"],
[class*="temperature"], [class*="Temperature"] {
  background-color: transparent !important;
  color: inherit !important;
}

/* Card components must use elevated background */
/* Exclude shadcn/ui components which have their own styling */
[class*="card"]:not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([data-radar-container]):not([class*="bg-card"]):not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-background"]):not([class*="bg-accent"]):not([data-radix-]):not([role="dialog"]):not([role="alertdialog"]):not([role="menu"]),
[class*="Card"]:not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([data-radar-container]):not([class*="bg-card"]):not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-background"]):not([class*="bg-accent"]):not([data-radix-]):not([role="dialog"]):not([role="alertdialog"]):not([role="menu"]),
.pixel-border:not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([data-radar-container]):not([class*="bg-card"]):not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-background"]):not([class*="bg-accent"]):not([data-radix-]),
.border-2:not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([data-radar-container]):not([class*="bg-card"]):not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-background"]):not([class*="bg-accent"]):not([data-radix-]),
.border-4:not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([data-radar-container]):not([class*="bg-card"]):not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-background"]):not([class*="bg-accent"]):not([data-radix-]),
.p-4:not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([data-radar-container]):not([class*="bg-card"]):not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-background"]):not([class*="bg-accent"]):not([data-radix-]),
.p-6:not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([data-radar-container]):not([class*="bg-card"]):not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-background"]):not([class*="bg-accent"]):not([data-radix-]),
.p-8:not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([data-radar-container]):not([class*="bg-card"]):not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-background"]):not([class*="bg-accent"]):not([data-radix-]) {
  background-color: var(--bg-elev) !important;
  border-color: var(--border) !important;
}

/* Text elements MUST use theme colors */
p, span, div, a, li, td, th, label, 
.text-sm, .text-base, .text-lg, .text-xl,
[class*="text-"] {
  color: var(--text) !important;
}

/* Headers and important text */
h1, h2, h3, h4, h5, h6,
.font-bold, .font-semibold,
[class*="heading"], [class*="title"] {
  color: var(--primary) !important;
  text-shadow: 0 0 10px currentColor !important;
}

/* Muted/secondary text */
.text-muted, .text-secondary,
[class*="muted"], [class*="secondary"],
.text-xs, .text-gray-400, .text-gray-500 {
  color: var(--text-muted) !important;
}

/* Links and interactive elements */
a:not([role="button"]), 
.link, [class*="link"] {
  color: var(--accent) !important;
}

/* Buttons must be themed */
/* Exclude shadcn/ui buttons which have their own styling */
button:not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-accent"]):not([class*="bg-card"]):not([data-radix-]),
[role="button"]:not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-accent"]):not([class*="bg-card"]):not([data-radix-]),
.btn:not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-accent"]):not([class*="bg-card"]):not([data-radix-]),
[class*="button"]:not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-accent"]):not([class*="bg-card"]):not([data-radix-]) {
  background-color: var(--bg-elev) !important;
  color: var(--text) !important;
  border: 2px solid var(--primary) !important;
}

button:not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-accent"]):not([class*="bg-card"]):not([data-radix-]):hover,
[role="button"]:not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-accent"]):not([class*="bg-card"]):not([data-radix-]):hover {
  background-color: var(--primary) !important;
  color: var(--bg) !important;
}

/* Input fields */
input, textarea, select {
  background-color: var(--bg-elev) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

/* ═══════════════════════════════════════════════════════════
   THEME-SPECIFIC AGGRESSIVE OVERRIDES
   ═══════════════════════════════════════════════════════════ */

/* MIAMI VICE - Force neon colors everywhere */
/* Exclude radar containers and shadcn/ui components */
:root[data-theme="miami"] *:not([data-radar-container]):not([data-radar-container] *):not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([class*="bg-card"]):not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-background"]):not([data-radix-]):not([role="dialog"]):not([role="alertdialog"]):not([role="menu"]):not([role="menuitem"]):not([role="tooltip"]) {
  text-shadow: 0 0 5px currentColor !important;
}

:root[data-theme="miami"] [class*="card"],
:root[data-theme="miami"] .pixel-border {
  box-shadow: 
    0 0 20px rgba(249, 115, 22, 0.5),
    inset 0 0 20px rgba(236, 72, 153, 0.1) !important;
}

/* TRON - Force cyber grid aesthetic */
/* Exclude radar containers and shadcn/ui components */
:root[data-theme="tron"] *:not([data-radar-container]):not([data-radar-container] *):not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([class*="bg-card"]):not([class*="bg-primary"]):not([class*="bg-secondary"]):not([class*="bg-destructive"]):not([class*="bg-background"]):not([data-radix-]):not([role="dialog"]):not([role="alertdialog"]):not([role="menu"]):not([role="menuitem"]):not([role="tooltip"]) {
  text-shadow: 0 0 8px currentColor !important;
}

:root[data-theme="tron"] [class*="card"],
:root[data-theme="tron"] .pixel-border {
  box-shadow: 
    0 0 25px rgba(0, 255, 255, 0.6),
    inset 0 0 15px rgba(0, 255, 255, 0.2) !important;
  position: relative !important;
}

:root[data-theme="tron"] [class*="card"]:not([data-radar-container]):not([class*="map"]):not([class*="Map"]):not([class*="radar"]):not([class*="Radar"]):not([class*="bg-card"])::before {
  content: '';
  position: absolute;
  inset: -2px;
  background: linear-gradient(45deg, transparent, #00ffff, transparent);
  opacity: 0.5;
  z-index: -1;
  animation: tronBorderPulse 3s linear infinite;
}

@keyframes tronBorderPulse {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.8; }
}

/* ═══════════════════════════════════════════════════════════
   COMPONENT-SPECIFIC ENFORCEMENT
   ═══════════════════════════════════════════════════════════ */

/* Exclude radar/map containers from theme enforcement */
[class*="map"], [class*="Map"], [class*="radar"], [class*="Radar"],
[data-radar-container] {
  background-color: transparent !important;
  backdrop-filter: none !important;
}

/* Prevent theme enforcement from overriding radar-specific styles */
[class*="map"] *, [class*="Map"] *, [class*="radar"] *, [class*="Radar"] *,
[data-radar-container] * {
  background-color: inherit !important;
  color: inherit !important;
  border-color: inherit !important;
  image-rendering: auto !important;
  font-family: inherit !important;
  text-shadow: none !important;
  box-shadow: none !important;
}

/* Exclude shadcn/ui components from theme enforcement font rules */
[class*="bg-card"],
[class*="bg-primary"],
[class*="bg-secondary"],
[class*="bg-destructive"],
[class*="bg-background"],
[class*="bg-accent"],
[class*="text-card-foreground"],
[class*="text-primary-foreground"],
[class*="text-secondary-foreground"],
[class*="text-destructive-foreground"],
[class*="text-muted-foreground"],
[data-radix-portal],
[data-radix-popper-content-wrapper],
[role="dialog"],
[role="alertdialog"],
[role="menu"],
[role="menuitem"],
[role="tooltip"],
[role="combobox"],
[role="listbox"],
button[class*="bg-primary"],
button[class*="bg-secondary"],
button[class*="bg-destructive"],
button[class*="bg-accent"],
[data-sonner-toast],
[data-sonner-toast] *,
[data-radix-] {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
  /* Ensure shadcn/ui components are visible */
  opacity: 1 !important;
  visibility: visible !important;
  display: revert !important;
  backdrop-filter: none !important;
}

/* Ensure children of shadcn/ui components inherit system fonts */
[class*="bg-card"] *,
[class*="bg-primary"] *,
[class*="bg-secondary"] *,
[class*="bg-destructive"] *,
[class*="bg-background"] *,
[class*="bg-accent"] *,
[data-radix-portal] *,
[data-radix-popper-content-wrapper] *,
[role="dialog"] *,
[role="alertdialog"] *,
[role="menu"] *,
[role="menuitem"] *,
[role="tooltip"] *,
[data-sonner-toast] * {
  font-family: inherit !important;
}

/* Specifically protect images and canvas inside radar containers */
[data-radar-container] img,
[data-radar-container] canvas,
[class*="map"] img,
[class*="Map"] img,
[class*="radar"] img,
[class*="Radar"] img,
[class*="map"] canvas,
[class*="Map"] canvas,
[class*="radar"] canvas,
[class*="Radar"] canvas {
  image-rendering: auto !important;
  color: unset !important;
  border-color: unset !important;
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
}

/* Weather display components */
.weather-current, .weather-forecast,
[class*="weather-card"], [class*="forecast-card"] {
  background-color: var(--bg-elev) !important;
  border: 2px solid var(--border) !important;
}

/* Temperature displays */
.temp-display, [class*="temperature"],
.weather-temp, .forecast-temp {
  color: var(--primary) !important;
  font-weight: bold !important;
  text-shadow: 0 0 15px currentColor !important;
}

/* Weather icons and emojis */
.weather-icon, .weather-emoji,
[class*="icon"], [class*="emoji"] {
  filter: drop-shadow(0 0 10px var(--primary)) !important;
}

/* ═══════════════════════════════════════════════════════════
   OVERRIDE INLINE STYLES
   ═══════════════════════════════════════════════════════════ */

/* Use !important to override any inline styles */
[style*="background-color"],
[style*="background"],
[style*="color"],
[style*="border-color"] {
  background-color: inherit !important;
  color: inherit !important;
  border-color: inherit !important;
}

/* Specific overrides for problematic inline styles */
[style*="background-color: rgb"],
[style*="background-color: #"],
[style*="color: rgb"],
[style*="color: #"] {
  background-color: var(--bg-elev) !important;
  color: var(--text) !important;
}

/* ═══════════════════════════════════════════════════════════
   ANIMATION ENFORCEMENT
   ═══════════════════════════════════════════════════════════ */

/* Ensure all transitions respect theme changes */
*, *::before, *::after {
  transition: 
    background-color 0.3s ease,
    color 0.3s ease,
    border-color 0.3s ease,
    box-shadow 0.3s ease,
    text-shadow 0.3s ease !important;
}

/* Disable transitions during theme change for instant update */
.theme-changing * {
  transition: none !important;
}