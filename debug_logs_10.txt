[dotenv@17.2.3] injecting env (10) from .env.local -- tip: âš™ï¸  suppress all logs with { quiet: true }

Running 1 test using 1 worker

[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com

[1A[2K[1/1] [chromium] â€º tests\weather-app.spec.ts:59:7 â€º 16-Bit Weather App â€º rate limiting message appears after multiple searches
[1A[2K[chromium] â€º tests\weather-app.spec.ts:59:7 â€º 16-Bit Weather App â€º rate limiting message appears after multiple searches
[Browser] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[Browser] [Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.

[1A[2K[Browser] âœ… Sentry client initialized

[1A[2K[Browser] [Sentry] Skipping initialization - DSN not configured

[1A[2K[Browser] [Supabase] Client initialized {supabaseUrl: https://cckcvyccjntadoohjntr.supabase.co}

[1A[2K[Browser] Preferences saved successfully

[1A[2K[Browser] Cache metrics before cleanup: {totalEntries: 0, totalSize: 0, expiredEntries: 0}

[1A[2K[Browser] Cache maintenance completed

[1A[2K[Browser] Failed to load resource: the server responded with a status of 403 ()

[1A[2K[Browser] [LocationProvider] Component mounted with pathname: /

[1A[2K[Browser] [LocationProvider] On mount - localStorage keys: [weather-app-rate-limit, bitweather_cache_timestamp, bitweather_city, bitweather_weather_data, bitweather_user_preferences]

[1A[2K[Browser]   weather-app-rate-limit: {"requests":[1764266021954,1764266020954,1764266019954,1764266018954,1764266017954,1764266016954,176...

[1A[2K[Browser]   bitweather_cache_timestamp: 1764266021954

[1A[2K[Browser]   bitweather_city: Testville, US

[1A[2K[Browser]   bitweather_weather_data: {"location":"Testville, US","country":"US","temperature":72,"unit":"Â°F","condition":"Sunny","descrip...

[1A[2K[Browser]   bitweather_user_preferences: {"settings":{"units":"imperial","theme":"dark","cacheEnabled":true},"updatedAt":1764266022507}

[1A[2K[Browser] [LocationProvider] Route change effect triggered: {pathname: /, lastPathname: , shouldClearOnRouteChange: true, locationInput: , currentLocation: }

[1A[2K[Browser] [LocationProvider] Route navigation analysis: {isNavigatingFromHomeToCityPage: false, isNavigatingFromHomeToMap: false, isNavigatingFromCityPageToHome: false, isNavigatingBetweenCityPages: false, shouldClearOnRouteChange: true}

[1A[2K[Browser] [LocationProvider] â­ï¸ CLEARING SKIPPED: Conditions not met

[1A[2K[Browser] [LocationProvider] Updating lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] Pathname initialization effect: {pathname: /, lastPathname: }

[1A[2K[Browser] [LocationProvider] Initializing lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] State change - locationInput: ""

[1A[2K[Browser] [LocationProvider] State change - currentLocation: ""

[1A[2K[Browser] [LocationProvider] State change - shouldClearOnRouteChange: true

[1A[2K[Browser] [LocationProvider] Component mounted with pathname: /

[1A[2K[Browser] [LocationProvider] On mount - localStorage keys: [weather-app-rate-limit, bitweather_cache_timestamp, bitweather_city, bitweather_weather_data, bitweather_user_preferences]

[1A[2K[Browser]   weather-app-rate-limit: {"requests":[1764266021954,1764266020954,1764266019954,1764266018954,1764266017954,1764266016954,176...

[1A[2K[Browser]   bitweather_cache_timestamp: 1764266021954

[1A[2K[Browser]   bitweather_city: Testville, US

[1A[2K[Browser]   bitweather_weather_data: {"location":"Testville, US","country":"US","temperature":72,"unit":"Â°F","condition":"Sunny","descrip...

[1A[2K[Browser]   bitweather_user_preferences: {"settings":{"units":"imperial","theme":"dark","cacheEnabled":true},"updatedAt":1764266022507}

[1A[2K[Browser] [LocationProvider] Route change effect triggered: {pathname: /, lastPathname: , shouldClearOnRouteChange: true, locationInput: , currentLocation: }

[1A[2K[Browser] [LocationProvider] Route navigation analysis: {isNavigatingFromHomeToCityPage: false, isNavigatingFromHomeToMap: false, isNavigatingFromCityPageToHome: false, isNavigatingBetweenCityPages: false, shouldClearOnRouteChange: true}

[1A[2K[Browser] [LocationProvider] â­ï¸ CLEARING SKIPPED: Conditions not met

[1A[2K[Browser] [LocationProvider] Updating lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] Pathname initialization effect: {pathname: /, lastPathname: }

[1A[2K[Browser] [LocationProvider] Initializing lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] State change - locationInput: ""

[1A[2K[Browser] [LocationProvider] State change - currentLocation: ""

[1A[2K[Browser] [LocationProvider] State change - shouldClearOnRouteChange: true

[1A[2K[Browser] [LocationProvider] Component mounted with pathname: /

[1A[2K[Browser] [LocationProvider] On mount - localStorage keys: [weather-app-rate-limit, bitweather_cache_timestamp, bitweather_city, bitweather_weather_data, bitweather_user_preferences]

[1A[2K[Browser]   weather-app-rate-limit: {"requests":[1764266021954,1764266020954,1764266019954,1764266018954,1764266017954,1764266016954,176...

[1A[2K[Browser]   bitweather_cache_timestamp: 1764266021954

[1A[2K[Browser]   bitweather_city: Testville, US

[1A[2K[Browser]   bitweather_weather_data: {"location":"Testville, US","country":"US","temperature":72,"unit":"Â°F","condition":"Sunny","descrip...

[1A[2K[Browser]   bitweather_user_preferences: {"settings":{"units":"imperial","theme":"dark","cacheEnabled":true},"updatedAt":1764266022507}

[1A[2K[Browser] [LocationProvider] Route change effect triggered: {pathname: /, lastPathname: , shouldClearOnRouteChange: true, locationInput: , currentLocation: }

[1A[2K[Browser] [LocationProvider] Route navigation analysis: {isNavigatingFromHomeToCityPage: false, isNavigatingFromHomeToMap: false, isNavigatingFromCityPageToHome: false, isNavigatingBetweenCityPages: false, shouldClearOnRouteChange: true}

[1A[2K[Browser] [LocationProvider] â­ï¸ CLEARING SKIPPED: Conditions not met

[1A[2K[Browser] [LocationProvider] Updating lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] Pathname initialization effect: {pathname: /, lastPathname: }

[1A[2K[Browser] [LocationProvider] Initializing lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] State change - locationInput: ""

[1A[2K[Browser] [LocationProvider] State change - currentLocation: ""

[1A[2K[Browser] [LocationProvider] State change - shouldClearOnRouteChange: true

[1A[2K[Browser] [LocationProvider] Component mounted with pathname: /

[1A[2K[Browser] [LocationProvider] On mount - localStorage keys: [weather-app-rate-limit, bitweather_cache_timestamp, bitweather_city, bitweather_weather_data, bitweather_user_preferences]

[1A[2K[Browser]   weather-app-rate-limit: {"requests":[1764266021954,1764266020954,1764266019954,1764266018954,1764266017954,1764266016954,176...

[1A[2K[Browser]   bitweather_cache_timestamp: 1764266021954

[1A[2K[Browser]   bitweather_city: Testville, US

[1A[2K[Browser]   bitweather_weather_data: {"location":"Testville, US","country":"US","temperature":72,"unit":"Â°F","condition":"Sunny","descrip...

[1A[2K[Browser]   bitweather_user_preferences: {"settings":{"units":"imperial","theme":"dark","cacheEnabled":true},"updatedAt":1764266022507}

[1A[2K[Browser] [LocationProvider] Route change effect triggered: {pathname: /, lastPathname: , shouldClearOnRouteChange: true, locationInput: , currentLocation: }

[1A[2K[Browser] [LocationProvider] Route navigation analysis: {isNavigatingFromHomeToCityPage: false, isNavigatingFromHomeToMap: false, isNavigatingFromCityPageToHome: false, isNavigatingBetweenCityPages: false, shouldClearOnRouteChange: true}

[1A[2K[Browser] [LocationProvider] â­ï¸ CLEARING SKIPPED: Conditions not met

[1A[2K[Browser] [LocationProvider] Updating lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] Pathname initialization effect: {pathname: /, lastPathname: }

[1A[2K[Browser] [LocationProvider] Initializing lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] State change - locationInput: ""

[1A[2K[Browser] [LocationProvider] State change - currentLocation: ""

[1A[2K[Browser] [LocationProvider] State change - shouldClearOnRouteChange: true

[1A[2K[Browser] [LocationProvider] Route change effect triggered: {pathname: /, lastPathname: /, shouldClearOnRouteChange: true, locationInput: , currentLocation: }

[1A[2K[Browser] [LocationProvider] No route change detected - returning early

[1A[2K[Browser] [LocationProvider] Pathname initialization effect: {pathname: /, lastPathname: /}

[1A[2K[Browser] Sentry client event captured: {exception: Object, level: error, platform: javascript, request: Object, event_id: 784f807737634e10b07794a39ab342a9}

[1A[2K[Browser] [AuthProvider] Initial session fetch {hasSession: false, error: undefined}

[1A[2K[Browser] %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit

[1A[2K[Browser] %c[Vercel Web Analytics]%c [pageview] http://localhost:3001/ color: rgb(120, 120, 120) color: inherit {o: http://localhost:3001/, sv: 0.1.3, sdkn: @vercel/analytics/react, sdkv: 1.5.0, ts: 1764266022867}

[1A[2K[Browser] %c[Vercel Speed Insights]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit

[1A[2K[Browser] [AuthProvider] Auth state change {event: INITIAL_SESSION, hasSession: false, userId: null}

[1A[2K[Browser] [AuthProvider] Initial session fetch {hasSession: false, error: undefined}

[1A[2K[Browser] [AuthProvider] Auth state change {event: INITIAL_SESSION, hasSession: false, userId: null}

[1A[2K[Browser] [AuthProvider] Initial session fetch {hasSession: false, error: undefined}

[1A[2K[Browser] [AuthProvider] Auth state change {event: INITIAL_SESSION, hasSession: false, userId: null}

[1A[2K[Browser] Failed to load resource: the server responded with a status of 403 ()

[1A[2K[Browser] Failed to load resource: the server responded with a status of 403 ()

[1A[2K[Browser] Requesting geolocation with options: {enableHighAccuracy: false, timeout: 5000, maximumAge: 300000, useCache: true}

[1A[2K[Browser] Geolocation error: GeolocationPositionError

[1A[2K[Browser] Attempting IP-based location detection...

[1A[2K[Browser] Trying IP service: https://ipapi.co/json/

[1A[2K[Browser] Failed to load resource: the server responded with a status of 403 ()

[1A[2K[Browser] Access to fetch at 'https://ipapi.co/json/' from origin 'http://localhost:3001' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.

[1A[2K[Browser] Failed to load resource: net::ERR_FAILED

[1A[2K[Browser] IP service error for https://ipapi.co/json/: TypeError: Failed to fetch (ipapi.co)
    at eval (webpack-internal:///(app-pages-browser)/./node_modules/@sentry/core/build/esm/instrument/fetch.js:88:28)
    at LocationService.getLocationByIP (webpack-internal:///(app-pages-browser)/./lib/location-service.ts:132:44)
    at useWeatherController.useEffect.tryAutoLocation (webpack-internal:///(app-pages-browser)/./hooks/useWeatherController.ts:389:125)

[1A[2K[Browser] Trying IP service: https://ipinfo.io/json

[1A[2K[Browser] IP service response from https://ipinfo.io/json: {ip: 73.71.148.204, city: Livermore, region: California, country: US, loc: 37.6819,-121.7680}

[1A[2K[Browser] IP-based location detected: {latitude: 37.6819, longitude: -121.768, city: Livermore, region: California, country: US}

[1A[2K[Browser] Preferences saved successfully

[1A[2K  1) [chromium] â€º tests\weather-app.spec.ts:59:7 â€º 16-Bit Weather App â€º rate limiting message appears after multiple searches 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoHaveAttribute[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: getByTestId('location-search-input')
    Expected pattern: [32m/Rate limit reached/i[39m
    Received string:  [31m"ZIP, City+State, or City+Country..."[39m
    Timeout: 5000ms

    Call log:
    [2m  - Expect "toHaveAttribute" with timeout 5000ms[22m
    [2m  - waiting for getByTestId('location-search-input')[22m
    [2m    9 Ã— locator resolved to <input value="" disabled type="text" aria-label="Search location" data-testid="location-search-input" placeholder="ZIP, City+State, or City+Country..." class="flex h-10 rounded-md ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 w-full bg-weather-bg-elev border-2 text-weather-text placeholder-weather-muted font-mono text-sm sm:textâ€¦/>[22m
    [2m      - unexpected value "ZIP, City+State, or City+Country..."[22m


      103 |
      104 |     // Expect placeholder to indicate rate limit
    > 105 |     await expect(searchInput).toHaveAttribute('placeholder', /Rate limit reached/i);
          |                               ^
      106 |
      107 |     // Expect search button or location button to indicate rate limit
      108 |     const locationButton = page.locator('button').filter({ hasText: /RATE LIMITED/i });
        at C:\Users\justi\OneDrive\Desktop\Weather-application--main\tests\weather-app.spec.ts:105:31

    Error Context: test-results\weather-app-16-Bit-Weather-d1c01-ars-after-multiple-searches-chromium\error-context.md


[1A[2K  1 failed
    [chromium] â€º tests\weather-app.spec.ts:59:7 â€º 16-Bit Weather App â€º rate limiting message appears after multiple searches 

[36m  Serving HTML report at http://localhost:53988. Press Ctrl+C to quit.[39m
^Cnpm error A complete log of this run can be found in: C:\Users\justi\AppData\Local\npm-cache\_logs\2025-11-27T17_53_35_361Z-debug-0.log
