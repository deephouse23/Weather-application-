[dotenv@17.2.3] injecting env (10) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

Running 1 test using 1 worker

[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

[1A[2K[1/1] [chromium] ‚Ä∫ tests\weather-app.spec.ts:59:7 ‚Ä∫ 16-Bit Weather App ‚Ä∫ rate limiting message appears after multiple searches
[1A[2K[chromium] ‚Ä∫ tests\weather-app.spec.ts:59:7 ‚Ä∫ 16-Bit Weather App ‚Ä∫ rate limiting message appears after multiple searches
[Browser] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold

[1A[2K[Browser] [Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.

[1A[2K[Browser] ‚úÖ Sentry client initialized

[1A[2K[Browser] [Sentry] Skipping initialization - DSN not configured

[1A[2K[Browser] [Supabase] Client initialized {supabaseUrl: https://cckcvyccjntadoohjntr.supabase.co}

[1A[2K[Browser] Preferences saved successfully

[1A[2K[Browser] Cache metrics before cleanup: {totalEntries: 0, totalSize: 0, expiredEntries: 0}

[1A[2K[Browser] Cache maintenance completed

[1A[2K[Browser] Failed to load resource: the server responded with a status of 403 ()

[1A[2K[Browser] [LocationProvider] Component mounted with pathname: /

[1A[2K[Browser] [LocationProvider] On mount - localStorage keys: [weather-app-rate-limit, bitweather_cache_timestamp, bitweather_city, bitweather_weather_data, bitweather_user_preferences]

[1A[2K[Browser]   weather-app-rate-limit: {"requests":[1764265012760,1764265011760,1764265010760,1764265009760,1764265008760,1764265007760,176...

[1A[2K[Browser]   bitweather_cache_timestamp: 1764265012760

[1A[2K[Browser]   bitweather_city: New York, US

[1A[2K[Browser]   bitweather_weather_data: {"location":"New York, US","country":"US","temperature":72,"unit":"¬∞F","condition":"Clear","descript...

[1A[2K[Browser]   bitweather_user_preferences: {"settings":{"units":"imperial","theme":"dark","cacheEnabled":true},"updatedAt":1764265013381}

[1A[2K[Browser] [LocationProvider] Route change effect triggered: {pathname: /, lastPathname: , shouldClearOnRouteChange: true, locationInput: , currentLocation: }

[1A[2K[Browser] [LocationProvider] Route navigation analysis: {isNavigatingFromHomeToCityPage: false, isNavigatingFromHomeToMap: false, isNavigatingFromCityPageToHome: false, isNavigatingBetweenCityPages: false, shouldClearOnRouteChange: true}

[1A[2K[Browser] [LocationProvider] ‚è≠Ô∏è CLEARING SKIPPED: Conditions not met

[1A[2K[Browser] [LocationProvider] Updating lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] Pathname initialization effect: {pathname: /, lastPathname: }

[1A[2K[Browser] [LocationProvider] Initializing lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] State change - locationInput: ""

[1A[2K[Browser] [LocationProvider] State change - currentLocation: ""

[1A[2K[Browser] [LocationProvider] State change - shouldClearOnRouteChange: true

[1A[2K[Browser] [LocationProvider] Component mounted with pathname: /

[1A[2K[Browser] [LocationProvider] On mount - localStorage keys: [weather-app-rate-limit, bitweather_cache_timestamp, bitweather_city, bitweather_weather_data, bitweather_user_preferences]

[1A[2K[Browser]   weather-app-rate-limit: {"requests":[1764265012760,1764265011760,1764265010760,1764265009760,1764265008760,1764265007760,176...

[1A[2K[Browser]   bitweather_cache_timestamp: 1764265012760

[1A[2K[Browser]   bitweather_city: New York, US

[1A[2K[Browser]   bitweather_weather_data: {"location":"New York, US","country":"US","temperature":72,"unit":"¬∞F","condition":"Clear","descript...

[1A[2K[Browser]   bitweather_user_preferences: {"settings":{"units":"imperial","theme":"dark","cacheEnabled":true},"updatedAt":1764265013381}

[1A[2K[Browser] [LocationProvider] Route change effect triggered: {pathname: /, lastPathname: , shouldClearOnRouteChange: true, locationInput: , currentLocation: }

[1A[2K[Browser] [LocationProvider] Route navigation analysis: {isNavigatingFromHomeToCityPage: false, isNavigatingFromHomeToMap: false, isNavigatingFromCityPageToHome: false, isNavigatingBetweenCityPages: false, shouldClearOnRouteChange: true}

[1A[2K[Browser] [LocationProvider] ‚è≠Ô∏è CLEARING SKIPPED: Conditions not met

[1A[2K[Browser] [LocationProvider] Updating lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] Pathname initialization effect: {pathname: /, lastPathname: }

[1A[2K[Browser] [LocationProvider] Initializing lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] State change - locationInput: ""

[1A[2K[Browser] [LocationProvider] State change - currentLocation: ""

[1A[2K[Browser] [LocationProvider] State change - shouldClearOnRouteChange: true

[1A[2K[Browser] [LocationProvider] Component mounted with pathname: /

[1A[2K[Browser] [LocationProvider] On mount - localStorage keys: [weather-app-rate-limit, bitweather_cache_timestamp, bitweather_city, bitweather_weather_data, bitweather_user_preferences]

[1A[2K[Browser]   weather-app-rate-limit: {"requests":[1764265012760,1764265011760,1764265010760,1764265009760,1764265008760,1764265007760,176...

[1A[2K[Browser]   bitweather_cache_timestamp: 1764265012760

[1A[2K[Browser]   bitweather_city: New York, US

[1A[2K[Browser]   bitweather_weather_data: {"location":"New York, US","country":"US","temperature":72,"unit":"¬∞F","condition":"Clear","descript...

[1A[2K[Browser]   bitweather_user_preferences: {"settings":{"units":"imperial","theme":"dark","cacheEnabled":true},"updatedAt":1764265013381}

[1A[2K[Browser] [LocationProvider] Route change effect triggered: {pathname: /, lastPathname: , shouldClearOnRouteChange: true, locationInput: , currentLocation: }

[1A[2K[Browser] [LocationProvider] Route navigation analysis: {isNavigatingFromHomeToCityPage: false, isNavigatingFromHomeToMap: false, isNavigatingFromCityPageToHome: false, isNavigatingBetweenCityPages: false, shouldClearOnRouteChange: true}

[1A[2K[Browser] [LocationProvider] ‚è≠Ô∏è CLEARING SKIPPED: Conditions not met

[1A[2K[Browser] [LocationProvider] Updating lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] Pathname initialization effect: {pathname: /, lastPathname: }

[1A[2K[Browser] [LocationProvider] Initializing lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] State change - locationInput: ""

[1A[2K[Browser] [LocationProvider] State change - currentLocation: ""

[1A[2K[Browser] [LocationProvider] State change - shouldClearOnRouteChange: true

[1A[2K[Browser] [LocationProvider] Component mounted with pathname: /

[1A[2K[Browser] [LocationProvider] On mount - localStorage keys: [weather-app-rate-limit, bitweather_cache_timestamp, bitweather_city, bitweather_weather_data, bitweather_user_preferences]

[1A[2K[Browser]   weather-app-rate-limit: {"requests":[1764265012760,1764265011760,1764265010760,1764265009760,1764265008760,1764265007760,176...

[1A[2K[Browser]   bitweather_cache_timestamp: 1764265012760

[1A[2K[Browser]   bitweather_city: New York, US

[1A[2K[Browser]   bitweather_weather_data: {"location":"New York, US","country":"US","temperature":72,"unit":"¬∞F","condition":"Clear","descript...

[1A[2K[Browser]   bitweather_user_preferences: {"settings":{"units":"imperial","theme":"dark","cacheEnabled":true},"updatedAt":1764265013381}

[1A[2K[Browser] [LocationProvider] Route change effect triggered: {pathname: /, lastPathname: , shouldClearOnRouteChange: true, locationInput: , currentLocation: }

[1A[2K[Browser] [LocationProvider] Route navigation analysis: {isNavigatingFromHomeToCityPage: false, isNavigatingFromHomeToMap: false, isNavigatingFromCityPageToHome: false, isNavigatingBetweenCityPages: false, shouldClearOnRouteChange: true}

[1A[2K[Browser] [LocationProvider] ‚è≠Ô∏è CLEARING SKIPPED: Conditions not met

[1A[2K[Browser] [LocationProvider] Updating lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] Pathname initialization effect: {pathname: /, lastPathname: }

[1A[2K[Browser] [LocationProvider] Initializing lastPathname: "" -> "/"

[1A[2K[Browser] [LocationProvider] State change - locationInput: ""

[1A[2K[Browser] [LocationProvider] State change - currentLocation: ""

[1A[2K[Browser] [LocationProvider] State change - shouldClearOnRouteChange: true

[1A[2K[Browser] [LocationProvider] Route change effect triggered: {pathname: /, lastPathname: /, shouldClearOnRouteChange: true, locationInput: , currentLocation: }

[1A[2K[Browser] [LocationProvider] No route change detected - returning early

[1A[2K[Browser] [LocationProvider] Pathname initialization effect: {pathname: /, lastPathname: /}

[1A[2K[Browser] %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit

[1A[2K[Browser] %c[Vercel Web Analytics]%c [pageview] http://localhost:3001/ color: rgb(120, 120, 120) color: inherit {o: http://localhost:3001/, sv: 0.1.3, sdkn: @vercel/analytics/react, sdkv: 1.5.0, ts: 1764265013689}

[1A[2K[Browser] Sentry client event captured: {exception: Object, level: error, platform: javascript, request: Object, event_id: 4ead63163b0b4cdb8d1109d3d46205c1}

[1A[2K[Browser] %c[Vercel Speed Insights]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit

[1A[2K[Browser] [AuthProvider] Initial session fetch {hasSession: false, error: undefined}

[1A[2K[Browser] [AuthProvider] Auth state change {event: INITIAL_SESSION, hasSession: false, userId: null}

[1A[2K[Browser] [AuthProvider] Initial session fetch {hasSession: false, error: undefined}

[1A[2K[Browser] Failed to load resource: the server responded with a status of 403 ()

[1A[2K[Browser] Failed to load resource: the server responded with a status of 403 ()

[1A[2K[Browser] [AuthProvider] Auth state change {event: INITIAL_SESSION, hasSession: false, userId: null}

[1A[2K[Browser] [AuthProvider] Initial session fetch {hasSession: false, error: undefined}

[1A[2K[Browser] [AuthProvider] Auth state change {event: INITIAL_SESSION, hasSession: false, userId: null}

[1A[2K[Browser] Requesting geolocation with options: {enableHighAccuracy: false, timeout: 5000, maximumAge: 300000, useCache: true}

[1A[2K[Browser] Geolocation error: GeolocationPositionError

[1A[2K[Browser] Attempting IP-based location detection...

[1A[2K[Browser] Trying IP service: https://ipapi.co/json/

[1A[2K[Browser] Failed to load resource: the server responded with a status of 403 ()

[1A[2K[Browser] Access to fetch at 'https://ipapi.co/json/' from origin 'http://localhost:3001' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.

[1A[2K[Browser] Failed to load resource: net::ERR_FAILED

[1A[2K[Browser] IP service error for https://ipapi.co/json/: TypeError: Failed to fetch (ipapi.co)
    at eval (webpack-internal:///(app-pages-browser)/./node_modules/@sentry/core/build/esm/instrument/fetch.js:88:28)
    at LocationService.getLocationByIP (webpack-internal:///(app-pages-browser)/./lib/location-service.ts:132:44)
    at useWeatherController.useEffect.tryAutoLocation (webpack-internal:///(app-pages-browser)/./hooks/useWeatherController.ts:411:125)

[1A[2K[Browser] Trying IP service: https://ipinfo.io/json

[1A[2K[Browser] IP service response from https://ipinfo.io/json: {ip: 73.71.148.204, city: Livermore, region: California, country: US, loc: 37.6819,-121.7680}

[1A[2K[Browser] IP-based location detected: {latitude: 37.6819, longitude: -121.768, city: Livermore, region: California, country: US}

[1A[2K[Browser] Preferences saved successfully

[1A[2K  1) [chromium] ‚Ä∫ tests\weather-app.spec.ts:59:7 ‚Ä∫ 16-Bit Weather App ‚Ä∫ rate limiting message appears after multiple searches 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('body')
    Expected pattern: [32m/too many requests|please wait/i[39m
    Received string:  [31m"12 Issues16BIT WEATHERHOMERADARLEARNEXTREMESNEWSGAMESABOUTLOGIN16BIT WEATHER‚ñ∫ 90210 ‚Ä¢ NEW YORK, NY ‚Ä¢ LONDON, UK ‚óÑ‚ñ∫ ZIP ‚Ä¢ CITY, STATE ‚Ä¢ CITY, COUNTRY ‚óÑWEATHER BY CITY‚Üª SHUFFLESAN BERNARDINOJERSEY CITYLEXINGTONIRVINERALEIGHHENDERSONTOLEDOSAN FRANCISCOFORT WORTHHONOLULUShowing 10 of 94 cities ‚Ä¢ Click shuffle for moreAUTH DEBUGLoading: falseInitialized: trueUser: NoneSession: NoneProfile: NonePreferences: NoneLast Updated: 9:36:53 AM"[39m
    Timeout: 15000ms

    Call log:
    [2m  - Expect "toContainText" with timeout 15000ms[22m
    [2m  - waiting for locator('body')[22m
    [2m    4 √ó locator resolved to <body class="__className_f367f3 min-h-screen">‚Ä¶</body>[22m
    [2m      - unexpected value "16BIT WEATHERHOMERADARLEARNEXTREMESNEWSGAMESABOUT16BIT WEATHER‚ñ∫ 90210 ‚Ä¢ NEW YORK, NY ‚Ä¢ LONDON, UK ‚óÑ‚ñ∫ ZIP ‚Ä¢ CITY, STATE ‚Ä¢ CITY, COUNTRY ‚óÑ‚ïê‚ïê PRESS START TO INITIALIZE WEATHER DATA ‚ïê‚ïêLoading cities...AUTH DEBUGLoading: trueInitialized: falseUser: NoneSession: NoneProfile: NonePreferences: NoneLast Updated: 9:36:52 AM"[22m
    [2m    - locator resolved to <body class="__className_f367f3 min-h-screen theme-dark">‚Ä¶</body>[22m
    [2m    - unexpected value "01 Issue16BIT WEATHERHOMERADARLEARNEXTREMESNEWSGAMESABOUTLOGIN16BIT WEATHER‚ñ∫ 90210 ‚Ä¢ NEW YORK, NY ‚Ä¢ LONDON, UK ‚óÑ‚ñ∫ ZIP ‚Ä¢ CITY, STATE ‚Ä¢ CITY, COUNTRY ‚óÑ‚ïê‚ïê PRESS START TO INITIALIZE WEATHER DATA ‚ïê‚ïêWEATHER BY CITY‚Üª SHUFFLESAN BERNARDINOJERSEY CITYLEXINGTONIRVINERALEIGHHENDERSONTOLEDOSAN FRANCISCOFORT WORTHHONOLULUShowing 10 of 94 cities ‚Ä¢ Click shuffle for moreAUTH DEBUGLoading: falseInitialized: trueUser: NoneSession: NoneProfile: NonePreferences: NoneLast Updated: 9:36:53 AM"[22m
    [2m    - locator resolved to <body class="__className_f367f3 min-h-screen theme-dark">‚Ä¶</body>[22m
    [2m    - unexpected value "12 Issues16BIT WEATHERHOMERADARLEARNEXTREMESNEWSGAMESABOUTLOGIN16BIT WEATHER‚ñ∫ 90210 ‚Ä¢ NEW YORK, NY ‚Ä¢ LONDON, UK ‚óÑ‚ñ∫ ZIP ‚Ä¢ CITY, STATE ‚Ä¢ CITY, COUNTRY ‚óÑ‚ïê‚ïê PRESS START TO INITIALIZE WEATHER DATA ‚ïê‚ïêWEATHER BY CITY‚Üª SHUFFLESAN BERNARDINOJERSEY CITYLEXINGTONIRVINERALEIGHHENDERSONTOLEDOSAN FRANCISCOFORT WORTHHONOLULUShowing 10 of 94 cities ‚Ä¢ Click shuffle for moreAUTH DEBUGLoading: falseInitialized: trueUser: NoneSession: NoneProfile: NonePreferences: NoneLast Updated: 9:36:53 AM"[22m
    [2m    12 √ó locator resolved to <body class="__className_f367f3 min-h-screen theme-dark">‚Ä¶</body>[22m
    [2m       - unexpected value "12 Issues16BIT WEATHERHOMERADARLEARNEXTREMESNEWSGAMESABOUTLOGIN16BIT WEATHER‚ñ∫ 90210 ‚Ä¢ NEW YORK, NY ‚Ä¢ LONDON, UK ‚óÑ‚ñ∫ ZIP ‚Ä¢ CITY, STATE ‚Ä¢ CITY, COUNTRY ‚óÑWEATHER BY CITY‚Üª SHUFFLESAN BERNARDINOJERSEY CITYLEXINGTONIRVINERALEIGHHENDERSONTOLEDOSAN FRANCISCOFORT WORTHHONOLULUShowing 10 of 94 cities ‚Ä¢ Click shuffle for moreAUTH DEBUGLoading: falseInitialized: trueUser: NoneSession: NoneProfile: NonePreferences: NoneLast Updated: 9:36:53 AM"[22m


      78 |       await expect(warningBanner).toContainText(/too many requests/i);
      79 |     } else {
    > 80 |       await expect(page.locator('body')).toContainText(/too many requests|please wait/i, { timeout: 15000 });
         |                                          ^
      81 |     }
      82 |   });
      83 | });
        at C:\Users\justi\OneDrive\Desktop\Weather-application--main\tests\weather-app.spec.ts:80:42

    Error Context: test-results\weather-app-16-Bit-Weather-d1c01-ars-after-multiple-searches-chromium\error-context.md


[1A[2K  1 failed
    [chromium] ‚Ä∫ tests\weather-app.spec.ts:59:7 ‚Ä∫ 16-Bit Weather App ‚Ä∫ rate limiting message appears after multiple searches 

[36m  Serving HTML report at http://localhost:56712. Press Ctrl+C to quit.[39m
^Cnpm error A complete log of this run can be found in: C:\Users\justi\AppData\Local\npm-cache\_logs\2025-11-27T17_36_46_975Z-debug-0.log
