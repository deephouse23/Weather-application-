"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55],{2222:(e,t,o)=>{o.d(t,{A:()=>c});var a=o(5155),n=o(2115),l=o(1154),r=o(7924),i=o(4516),s=o(3999);function c(e){let{onSearch:t,onLocationSearch:o,isLoading:c,error:d,isDisabled:u=!1,rateLimitError:h,theme:g=s.Eg.THEMES.DARK,hideLocationButton:m=!1}=e,[p,x]=(0,n.useState)(""),f=(e=>{switch(e){case"dark":return{background:"bg-[#0f0f0f]",cardBg:"bg-[#0f0f0f]",borderColor:"border-[#00d4ff]",text:"text-[#e0e0e0]",headerText:"text-[#00d4ff]",secondaryText:"text-[#e0e0e0]",accentText:"text-[#00d4ff]",successText:"text-[#00ff00]",glow:"glow-dark",specialBorder:"border-[#00d4ff]",buttonHover:"hover:bg-[#00d4ff] hover:text-[#0f0f0f]",placeholderText:"placeholder-[#a0a0a0]",hoverBorder:"hover:border-[#00d4ff]",buttonBg:"bg-[#0f0f0f]",buttonBorder:"border-[#00d4ff]",buttonText:"text-[#e0e0e0]",errorBg:"bg-[#1a0f0f]",errorText:"text-[#ff4444]",warningText:"text-[#ff6b6b]"};case"miami":return{background:"bg-[#0a0025]",cardBg:"bg-[#0a0025]",borderColor:"border-[#ff1493]",text:"text-[#00ffff]",headerText:"text-[#ff1493]",secondaryText:"text-[#00ffff]",accentText:"text-[#ff1493]",successText:"text-[#00ff00]",glow:"glow-miami",specialBorder:"border-[#ff1493]",buttonHover:"hover:bg-[#ff1493] hover:text-[#0a0025]",placeholderText:"placeholder-[#b0d4f1]",hoverBorder:"hover:border-[#ff1493]",buttonBg:"bg-[#0a0025]",buttonBorder:"border-[#ff1493]",buttonText:"text-[#00ffff]",errorBg:"bg-[#1a0025]",errorText:"text-[#ff1493]",warningText:"text-[#ff69b4]"};case"tron":return{background:"bg-black",cardBg:"bg-black",borderColor:"border-[#00FFFF]",text:"text-white",headerText:"text-[#00FFFF]",secondaryText:"text-[#00FFFF]",accentText:"text-[#00FFFF]",successText:"text-[#00ff00]",glow:"glow-tron",specialBorder:"border-[#00FFFF]",buttonHover:"hover:bg-[#00FFFF] hover:text-black",placeholderText:"placeholder-[#88CCFF]",hoverBorder:"hover:border-[#00FFFF]",buttonBg:"bg-black",buttonBorder:"border-[#00FFFF]",buttonText:"text-white",errorBg:"bg-[#001111]",errorText:"text-[#FF4444]",warningText:"text-[#FF6B6B]"}}})(g),y=c||u;return(0,a.jsxs)("div",{className:"mb-4 sm:mb-6 w-full max-w-2xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-2 sm:mb-3 text-center px-2",children:(0,a.jsxs)("div",{className:"text-xs sm:text-sm ".concat(f.secondaryText," uppercase tracking-wider break-words"),children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"► 90210 • NEW YORK, NY • LONDON, UK ◄"}),(0,a.jsx)("span",{className:"sm:hidden",children:"► ZIP • CITY, STATE • CITY, COUNTRY ◄"})]})}),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),!p.trim()||c||u||t(p.trim())},className:"mb-3 sm:mb-4 px-2 sm:px-0",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:p,onChange:e=>x(e.target.value),placeholder:u?"Rate limit reached...":"ZIP, City+State, or City+Country...",disabled:y,className:"w-full px-3 sm:px-4 py-3 sm:py-4 pr-10 sm:pr-12 ".concat(f.cardBg," border-2 ").concat(f.borderColor," ").concat(f.text," ").concat(f.placeholderText," \n                     font-mono text-sm sm:text-base uppercase tracking-wider focus:outline-none ").concat(f.hoverBorder," \n                     transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed pixel-font ").concat(f.specialBorder,"\n                     min-h-[48px] touch-manipulation"),style:{imageRendering:"pixelated",fontFamily:"monospace",fontSize:"clamp(12px, 3vw, 16px)"}}),(0,a.jsx)("button",{type:"submit",disabled:y||!p.trim(),className:"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 p-2 ".concat(f.secondaryText," hover:text-[#ffe66d] \n                     transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ").concat(f.glow,"\n                     min-w-[44px] min-h-[44px] flex items-center justify-center touch-manipulation"),children:c?(0,a.jsx)(l.A,{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin"}):(0,a.jsx)(r.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})}),!m&&(0,a.jsx)("div",{className:"flex justify-center px-2 sm:px-0",children:(0,a.jsxs)("button",{onClick:()=>{c||u||o()},disabled:y,className:"flex items-center gap-2 px-4 sm:px-6 py-3 ".concat(f.buttonBg," border ").concat(f.buttonBorder," \n                     ").concat(f.buttonText," ").concat(f.buttonHover," transition-all duration-200 \n                     text-xs sm:text-sm uppercase tracking-wider font-mono disabled:opacity-50 \n                     disabled:cursor-not-allowed pixel-font ").concat(f.specialBorder,"\n                     min-h-[48px] touch-manipulation w-full sm:w-auto max-w-xs"),style:{imageRendering:"pixelated",fontFamily:"monospace",fontSize:"clamp(11px, 2.5vw, 14px)"},children:[(0,a.jsx)(i.A,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"break-words text-center",children:c?"LOADING...":u?"RATE LIMITED":"USE MY LOCATION"})]})}),(d||h)&&(0,a.jsxs)("div",{className:"p-3 sm:p-4 mx-2 sm:mx-0 ".concat(f.errorBg," border ").concat(f.errorText," \n                      text-xs sm:text-sm text-center pixel-font ").concat(f.specialBorder),children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2 sm:mb-3",children:[(0,a.jsx)("span",{children:"⚠"}),(0,a.jsx)("span",{className:"uppercase tracking-wider break-words",children:d||h})]}),(null==d?void 0:d.includes("not found"))&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs ".concat(f.secondaryText," normal-case"),children:"Try these format examples:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[(0,a.jsx)("button",{onClick:()=>x("90210"),className:"".concat(f.warningText," hover:text-[#00d4ff] transition-colors cursor-pointer underline ").concat(f.glow,"\n                           py-2 px-3 touch-manipulation min-h-[44px] text-left"),disabled:u,children:"► ZIP: 90210"}),(0,a.jsx)("button",{onClick:()=>x("New York, NY"),className:"".concat(f.warningText," hover:text-[#00d4ff] transition-colors cursor-pointer underline ").concat(f.glow,"\n                           py-2 px-3 touch-manipulation min-h-[44px] text-left"),disabled:u,children:"► City + State: New York, NY"}),(0,a.jsx)("button",{onClick:()=>x("London, UK"),className:"".concat(f.warningText," hover:text-[#00d4ff] transition-colors cursor-pointer underline ").concat(f.glow,"\n                           py-2 px-3 touch-manipulation min-h-[44px] text-left"),disabled:u,children:"► City + Country: London, UK"})]})]}),(null==d?void 0:d.includes("API key"))&&(0,a.jsx)("div",{className:"text-xs ".concat(f.secondaryText," normal-case mt-2 break-words"),children:"Please configure your OpenWeatherMap API key in the environment variables."}),(null==d?void 0:d.includes("location"))&&(null==d?void 0:d.includes("denied"))&&(0,a.jsx)("div",{className:"text-xs ".concat(f.secondaryText," normal-case mt-2 break-words"),children:"Location access was denied. Try searching manually or enable location permissions."}),((null==d?void 0:d.includes("network"))||(null==d?void 0:d.includes("fetch")))&&(0,a.jsx)("div",{className:"text-xs ".concat(f.secondaryText," normal-case mt-2 break-words"),children:"Network error. Please check your internet connection and try again."})]})]})}},3613:(e,t,o)=>{o.d(t,{A:()=>u});var a=o(5155),n=o(8691),l=o(7574),r=o(8611),i=o(2657),s=o(5163),c=o(1034),d=o(2623);function u(e){let{forecast:t,theme:o="dark",selectedDay:n,currentWeatherData:l}=e,r=(0,d.kp)(o,"card");return null===n?null:(0,a.jsxs)("div",{className:"".concat(r.background," p-3 sm:p-4 lg:p-6 rounded-none border-2 sm:border-4 ").concat(r.borderColor," pixel-shadow"),children:[(0,a.jsx)("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 ".concat(r.accentText," uppercase tracking-wider text-center pixel-glow"),children:"DETAILED FORECAST"}),(0,a.jsxs)("div",{className:"".concat(r.cardBg," border ").concat(r.borderColor," p-4"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold ".concat(r.accentText," pixel-glow"),children:t[n].day}),(0,a.jsx)("p",{className:"text-sm ".concat(r.text," capitalize"),children:t[n].description})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"text-xl font-bold ".concat(r.accentText," pixel-glow"),children:[Math.round(t[n].highTemp),"\xb0 / ",Math.round(t[n].lowTemp),"\xb0"]})})]}),(0,a.jsx)(h,{selectedDay:n,forecastDay:t[n],theme:o,themeClasses:r,currentWeatherData:l})]})]})}function h(e){let{selectedDay:t,forecastDay:o,theme:d,themeClasses:u,currentWeatherData:h}=e,g=0===t,m=null==o?void 0:o.details,p=[{icon:(0,a.jsx)(n.A,{className:"w-4 h-4"}),label:"Humidity",value:(null==m?void 0:m.humidity)!==void 0?"".concat(m.humidity,"%"):g&&(null==h?void 0:h.humidity)?"".concat(h.humidity,"%"):"N/A"},{icon:(0,a.jsx)(l.A,{className:"w-4 h-4"}),label:"Wind",value:(null==m?void 0:m.windSpeed)!==void 0?"".concat(m.windSpeed," mph ").concat(m.windDirection||""):g&&(null==h?void 0:h.wind)?"".concat(Math.round(h.wind.speed)," mph ").concat(h.wind.direction||""):"N/A"},{icon:(0,a.jsx)(r.A,{className:"w-4 h-4"}),label:"Pressure",value:(null==m?void 0:m.pressure)||(g&&(null==h?void 0:h.pressure)?h.pressure:"N/A")},{icon:(0,a.jsx)(i.A,{className:"w-4 h-4"}),label:"UV Index",value:(null==m?void 0:m.uvIndex)!==void 0?m.uvIndex.toString():g&&(null==h?void 0:h.uvIndex)!==void 0?h.uvIndex.toString():"N/A"}];return((null==h?void 0:h.sunrise)||(null==h?void 0:h.sunset))&&p.push({icon:(0,a.jsx)(s.A,{className:"w-4 h-4"}),label:"Sunrise",value:h.sunrise||"N/A"},{icon:(0,a.jsx)(c.A,{className:"w-4 h-4"}),label:"Sunset",value:h.sunset||"N/A"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4",children:p.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"".concat(u.accentText," flex-shrink-0"),children:e.icon}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"text-xs ".concat(u.secondary," opacity-70"),children:e.label}),(0,a.jsx)("div",{className:"text-sm font-medium ".concat(u.text," truncate"),children:e.value})]})]},t))})}},5208:(e,t,o)=>{o.d(t,{A:()=>l});var a=o(5155),n=o(3999);function l(e){let{forecast:t,theme:o="dark",onDayClick:n,selectedDay:l}=e,i=(e=>{switch(e){case"dark":return{cardBg:"bg-[#16213e]",itemBg:"bg-[#1a1a2e]",itemHover:"hover:bg-[#1f2347]",borderColor:"border-[#00d4ff]",itemBorder:"border-[#4ecdc4]",headerText:"text-[#00d4ff]",primaryText:"text-[#4ecdc4]",temperatureText:"text-[#ffe66d]",lowTempText:"text-[#4ecdc4]",glow:"",specialBorder:"",cardStyle:{},itemStyle:{}};case"miami":return{cardBg:"bg-gradient-to-br from-[#4a0e4e] via-[#2d1b69] to-[#1a0033]",itemBg:"bg-gradient-to-br from-[#2d1b69] to-[#4a0e4e]",itemHover:"hover:bg-gradient-to-br hover:from-[#4a0e4e] hover:to-[#6a1b9a]",borderColor:"border-[#ff1493]",itemBorder:"border-[#ff1493]",headerText:"text-[#ff007f]",primaryText:"text-[#00ffff]",temperatureText:"text-[#ff1493]",lowTempText:"text-[#00ffff]",glow:"drop-shadow-[0_0_8px_#ff007f]",specialBorder:"shadow-[0_0_15px_#ff1493]",cardStyle:{boxShadow:"0 0 30px #ff1493, 0 0 60px rgba(255, 20, 147, 0.3), inset 0 0 20px rgba(138, 43, 226, 0.2)",textShadow:"0 0 15px #ff007f, 0 0 30px #ff007f"},itemStyle:{background:"linear-gradient(135deg, #2d1b69, #4a0e4e)",boxShadow:"0 0 20px #ff1493, inset 0 0 15px rgba(255, 20, 147, 0.1)",borderColor:"#ff1493"}};case"tron":return{cardBg:"bg-[#000000]",itemBg:"bg-[#000000]",itemHover:"hover:bg-[#001111]",borderColor:"border-[#00FFFF]",itemBorder:"border-[#00FFFF]",headerText:"text-[#00FFFF]",primaryText:"text-[#FFFFFF]",temperatureText:"text-[#00FFFF]",lowTempText:"text-[#88CCFF]",glow:"drop-shadow-[0_0_15px_#00FFFF]",specialBorder:"shadow-[0_0_20px_#00FFFF]",cardStyle:{boxShadow:"0 0 30px #00FFFF, 0 0 60px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)",textShadow:"0 0 15px #00FFFF, 0 0 30px #00FFFF"},itemStyle:{background:"linear-gradient(135deg, #000000, #001111)",boxShadow:"0 0 25px #00FFFF, inset 0 0 20px rgba(0, 255, 255, 0.1)",borderColor:"#00FFFF"}}}})(o);return(0,a.jsxs)("div",{className:"".concat(i.cardBg," p-3 sm:p-4 lg:p-6 rounded-none border-2 sm:border-4 ").concat(i.borderColor," pixel-shadow ").concat(i.specialBorder),style:i.cardStyle,children:[(0,a.jsx)("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 ".concat(i.headerText," uppercase tracking-wider ").concat(i.glow," text-center"),style:{textShadow:i.cardStyle.textShadow},children:"5-DAY FORECAST"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-3 lg:gap-4",children:t.slice(0,5).map((e,t)=>(0,a.jsx)(r,{day:e,index:t,themeClasses:i,theme:o,onDayClick:n,isSelected:l===t},t))})]})}function r(e){let{day:t,index:o,themeClasses:n,theme:l,onDayClick:r,isSelected:s}=e,c="US"===t.country||"USA"===t.country?"\xb0F":"\xb0C",d=new Date,u=new Date(d);u.setDate(d.getDate()+o);let h=u.getMonth()+1,g=u.getDate(),m=u.getFullYear().toString().slice(-2),p="".concat(h,".").concat(g.toString().padStart(2,"0"),".").concat(m);return(0,a.jsxs)("div",{className:"".concat(n.itemBg," p-2 sm:p-3 border ").concat(n.itemBorder," text-center transition-all duration-200 ").concat(n.specialBorder,"\n                  min-h-[120px] sm:min-h-[140px] lg:min-h-[160px] flex flex-col justify-between\n                  ").concat(r?"cursor-pointer hover:scale-105":""," ").concat(n.itemHover,"\n                  ").concat(s?"ring-2 ring-".concat("dark"===l?"[#00d4ff]":"miami"===l?"[#ff1493]":"[#00FFFF]"," ring-opacity-80"):""),style:n.itemStyle,onClick:()=>{r&&r(o)},children:[(0,a.jsxs)("div",{className:"text-xs sm:text-sm font-bold ".concat(n.primaryText," mb-1 sm:mb-2 uppercase tracking-wider ").concat(n.glow," break-words"),children:[(0,a.jsx)("span",{className:"sm:hidden",children:t.day.substring(0,3)}),(0,a.jsx)("span",{className:"hidden sm:inline",children:t.day}),(0,a.jsx)("div",{className:"text-xs ".concat(n.primaryText," opacity-70 mt-1"),children:p})]}),(0,a.jsx)("div",{className:"flex justify-center mb-2 sm:mb-3 flex-grow items-center",children:(0,a.jsx)(i,{condition:t.condition,size:"small"})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"text-sm sm:text-base lg:text-lg font-bold ".concat(n.temperatureText," pixel-glow ").concat(n.glow),style:"dark"!==l?{textShadow:"tron"===l?"0 0 10px #00FFFF, 0 0 20px #00FFFF":"0 0 10px #ff1493, 0 0 20px #ff1493"}:{},children:[Math.round(t.highTemp),c]}),(0,a.jsxs)("div",{className:"text-xs sm:text-sm ".concat(n.lowTempText," opacity-80 font-medium ").concat(n.glow),children:[Math.round(t.lowTemp),c]})]}),(0,a.jsxs)("div",{className:"text-xs ".concat(n.primaryText," capitalize mt-1 sm:mt-2 ").concat(n.glow," break-words hyphens-auto leading-tight"),title:t.description,style:{fontSize:"clamp(10px, 2vw, 12px)",lineHeight:"1.2"},children:[(0,a.jsx)("span",{className:"sm:hidden",children:t.description.length>12?"".concat(t.description.substring(0,10),"..."):t.description}),(0,a.jsx)("span",{className:"hidden sm:inline",children:t.description.length>20?"".concat(t.description.substring(0,18),"..."):t.description})]})]})}function i(e){let{condition:t,size:o}=e,l="large"===o?"w-20 h-20":"w-8 h-8",r={imageRendering:"pixelated",filter:"contrast(1.2) saturate(1.3)"};switch(t.toLowerCase()){case"sunny":return(0,a.jsxs)("div",{className:(0,n.cn)("relative",l),style:r,children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[#ffe66d] rounded-full"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-3/4 h-3/4 bg-[#ffcc02] rounded-full"}),(0,a.jsx)("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-1 h-3 bg-[#ffe66d]"}),(0,a.jsx)("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-3 bg-[#ffe66d]"}),(0,a.jsx)("div",{className:"absolute top-1/2 -left-1 transform -translate-y-1/2 w-3 h-1 bg-[#ffe66d]"}),(0,a.jsx)("div",{className:"absolute top-1/2 -right-1 transform -translate-y-1/2 w-3 h-1 bg-[#ffe66d]"})]});case"cloudy":return(0,a.jsxs)("div",{className:(0,n.cn)("relative",l),style:r,children:[(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-3/4 h-3/4 bg-[#e0e0e0] rounded-full"}),(0,a.jsx)("div",{className:"absolute top-0 right-0 w-3/4 h-3/4 bg-[#b0b0b0] rounded-full"}),(0,a.jsx)("div",{className:"absolute top-1/4 left-1/4 w-1/2 h-1/2 bg-[#d0d0d0] rounded-full"})]});case"rainy":return(0,a.jsxs)("div",{className:(0,n.cn)("relative",l),style:r,children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-3/4 h-1/2 bg-[#6c7b7f] rounded-full"}),(0,a.jsx)("div",{className:"absolute top-1/4 right-0 w-3/4 h-1/2 bg-[#5a6c70] rounded-full"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-1/4 w-1 h-1/3 bg-[#00d4ff]"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-1/2 w-1 h-1/4 bg-[#00d4ff]"}),(0,a.jsx)("div",{className:"absolute bottom-0 right-1/4 w-1 h-1/3 bg-[#00d4ff]"})]});case"snowy":return(0,a.jsxs)("div",{className:(0,n.cn)("relative",l),style:r,children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-3/4 h-1/2 bg-[#d0d0d0] rounded-full"}),(0,a.jsx)("div",{className:"absolute top-1/4 right-0 w-3/4 h-1/2 bg-[#b8b8b8] rounded-full"}),(0,a.jsx)("div",{className:"absolute bottom-1 left-1/4 w-2 h-2 bg-white transform rotate-45"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-1/2 w-2 h-2 bg-white transform rotate-45"}),(0,a.jsx)("div",{className:"absolute bottom-1 right-1/4 w-2 h-2 bg-white transform rotate-45"})]});default:return(0,a.jsx)("div",{className:(0,n.cn)("relative",l),style:r,children:(0,a.jsx)("div",{className:"absolute inset-0 bg-[#ffe66d] rounded-full"})})}}},5631:(e,t,o)=>{o.d(t,{fetchWeatherByLocation:()=>_,v:()=>k});var a=o(9509);let n="https://api.openweathermap.org/data/2.5",l="https://api.openweathermap.org/geo/1.0",r=()=>{console.log("\uD83D\uDD0D ENVIRONMENT VARIABLE DEBUG:"),console.log("NODE_ENV:","production"),console.log("REACT_APP_OPENWEATHER_API_KEY:",a.env.REACT_APP_OPENWEATHER_API_KEY?"SET":"MISSING"),console.log("NEXT_PUBLIC_OPENWEATHER_API_KEY:",a.env.NEXT_PUBLIC_OPENWEATHER_API_KEY?"SET":"MISSING"),console.log("All env vars starting with REACT_APP_:",Object.keys(a.env).filter(e=>e.startsWith("REACT_APP_"))),console.log("All env vars starting with NEXT_PUBLIC_:",Object.keys(a.env).filter(e=>e.startsWith("NEXT_PUBLIC_")));let e=a.env.NEXT_PUBLIC_OPENWEATHER_API_KEY||a.env.REACT_APP_OPENWEATHER_API_KEY;if(!e)throw console.error("❌ OpenWeather API key is missing!"),console.error("Please set either NEXT_PUBLIC_OPENWEATHER_API_KEY or REACT_APP_OPENWEATHER_API_KEY environment variable."),console.error("For Next.js, use NEXT_PUBLIC_OPENWEATHER_API_KEY"),Error("OpenWeather API key not configured");return console.log("✅ OpenWeather API key found:",e.substring(0,8)+"..."),e},i=()=>{let e=a.env.NEXT_PUBLIC_GOOGLE_POLLEN_API_KEY||a.env.REACT_APP_GOOGLE_POLLEN_API_KEY;return e?(console.log("✅ Google Pollen API key found:",e.substring(0,8)+"..."),e):(console.warn("⚠️ Google Pollen API key is missing!"),console.warn("Please set either NEXT_PUBLIC_GOOGLE_POLLEN_API_KEY or REACT_APP_GOOGLE_POLLEN_API_KEY environment variable for real pollen data."),null)},s=e=>{if(e<0||e>360)return"N";let t=(e%360+360)%360;return t>=337.5||t<22.5?"N":t>=22.5&&t<67.5?"NE":t>=67.5&&t<112.5?"E":t>=112.5&&t<157.5?"SE":t>=157.5&&t<202.5?"S":t>=202.5&&t<247.5?"SW":t>=247.5&&t<292.5?"W":t>=292.5&&t<337.5?"NW":"N"},c=(e,t)=>{let o=1e3*e,a=new Date(t?o+1e3*t:o),n=a.getUTCHours(),l=a.getUTCMinutes().toString().padStart(2,"0");return"".concat(0===n?12:n>12?n-12:n,":").concat(l," ").concat(n>=12?"pm":"am")},d=e=>Math.round((e-32)*5/9),u=e=>"US"===e||"USA"===e,h=e=>u(e),g=(e,t)=>{console.log("Formatting temperature:",{temp:e,countryCode:t});let o=h(t);if(console.log("Using Fahrenheit:",o),o)return{value:e,unit:"\xb0F",display:"".concat(Math.round(e),"\xb0F")};{let t=d(e);return{value:t,unit:"\xb0C",display:"".concat(t,"\xb0C")}}},m=e=>e.trim().replace(/\s+/g," ").replace(/[""'']/g,'"').replace(/[–—]/g,"-"),p=e=>{let t=m(e);if(/^\d{5}(-\d{4})?$/.test(t))return{query:t,type:"zip",zipCode:t,country:"US"};if(/^[A-Z]{1,2}\d[A-Z\d]?\s?\d[A-Z]{2}$/i.test(t))return{query:t,type:"zip",zipCode:t.replace(/\s/g,""),country:"GB"};if(/^[A-Z]\d[A-Z]\s?\d[A-Z]\d$/i.test(t))return{query:t,type:"zip",zipCode:t.replace(/\s/g,""),country:"CA"};if(/^[A-Z0-9]{3,10}$/i.test(t)&&t.length>=3)return{query:t,type:"zip",zipCode:t};if(t.includes(",")){let e=t.split(",").map(e=>e.trim()).filter(e=>e.length>0);if(e.length>=2){let[o,a,...n]=e,l=o.replace(/[^\w\s\-'.]/g,"").trim();if(!l)return{query:t,type:"city_only",city:t};let r=a.toLowerCase();return["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","DC"].includes(a.toUpperCase())||["alabama","alaska","arizona","arkansas","california","colorado","connecticut","delaware","florida","georgia","hawaii","idaho","illinois","indiana","iowa","kansas","kentucky","louisiana","maine","maryland","massachusetts","michigan","minnesota","mississippi","missouri","montana","nebraska","nevada","new hampshire","new jersey","new mexico","new york","north carolina","north dakota","ohio","oklahoma","oregon","pennsylvania","rhode island","south carolina","south dakota","tennessee","texas","utah","vermont","virginia","washington","west virginia","wisconsin","wyoming","district of columbia"].includes(r)?{query:t,type:"city_state",city:l,state:a,country:"US"}:["US","GB","UK","CA","AU","DE","FR","IT","ES","JP","CN","IN","BR","RU","MX","NL","BE","CH","AT","SE","NO","DK","FI","IE","PT","GR","TR","PL","CZ","HU","RO","BG","HR","SI","SK","LT","LV","EE","IS","MT","CY","LU"].includes(a.toUpperCase())||["united states","united kingdom","canada","australia","germany","france","italy","spain","japan","china","india","brazil","russia","mexico","netherlands","belgium","switzerland","austria","sweden","norway","denmark","finland","ireland","portugal","greece","turkey","poland","czech republic","hungary","romania","bulgaria","croatia","slovenia","slovakia","lithuania","latvia","estonia","iceland","malta","cyprus","luxembourg"].includes(r)?{query:t,type:"city_country",city:l,country:a}:n.length>0?{query:t,type:"city_country",city:l,state:a,country:n[0]}:{query:t,type:"city_country",city:l,country:a}}}let o=t.replace(/[^\w\s\-'.]/g,"").trim();return{query:t,type:"city_only",city:o||t}},x=e=>{let t=e.toLowerCase();return t.includes("clear")||t.includes("sun")?"sunny":t.includes("cloud")?"cloudy":t.includes("rain")||t.includes("drizzle")?"rainy":t.includes("snow")||t.includes("sleet")?"snowy":t.includes("mist")||t.includes("fog")?"cloudy":t.includes("thunder")?"rainy":"sunny"},f=async(e,t)=>{if("zip"===e.type){let o=e.country?"".concat(e.zipCode,",").concat(e.country):e.zipCode,a=await fetch("".concat(l,"/zip?zip=").concat(encodeURIComponent(o),"&appid=").concat(t));if(!a.ok)throw Error("ZIP code not found. Please check the ZIP code and try again.");let n=await a.json();return{lat:n.lat,lon:n.lon,displayName:"".concat(n.name,", ").concat(n.country)}}{let o=e.city||e.query;e.state&&(o+=",".concat(e.state)),e.country&&(o+=",".concat(e.country));let a=await fetch("".concat(l,"/direct?q=").concat(encodeURIComponent(o),"&limit=1&appid=").concat(t));if(!a.ok)throw Error("Geocoding API error: ".concat(a.status));let n=await a.json();if(!n||0===n.length)throw Error(S(e));let r=n[0],i=r.state?"".concat(r.name,", ").concat(r.state,", ").concat(r.country):"".concat(r.name,", ").concat(r.country);return{lat:r.lat,lon:r.lon,displayName:i}}},y=()=>{let e,t;let o=new Date("2024-01-11T11:57:00Z"),a=(new Date().getTime()-o.getTime())/864e5%29.530588853/29.530588853*360,n=Math.round((1-Math.cos(a*Math.PI/180))*50);return a<1||a>359?(e="New Moon",t="\uD83C\uDF11"):a<90?(e="Waxing Crescent",t="\uD83C\uDF12"):a<91?(e="First Quarter",t="\uD83C\uDF13"):a<180?(e="Waxing Gibbous",t="\uD83C\uDF14"):a<181?(e="Full Moon",t="\uD83C\uDF15"):a<270?(e="Waning Gibbous",t="\uD83C\uDF16"):a<271?(e="Last Quarter",t="\uD83C\uDF17"):(e="Waning Crescent",t="\uD83C\uDF18"),{phase:e,illumination:n,emoji:t,phaseAngle:a}},w=(e,t)=>{let o={};return e.list.forEach(e=>{var a,n,l;let r=new Date(1e3*e.dt).toLocaleDateString("en-US",{weekday:"long"}),i=new Date(1e3*e.dt).toLocaleTimeString("en-US",{hour:"numeric",hour12:!0});o[r]?(o[r].high=Math.max(o[r].high,e.main.temp),o[r].low=Math.min(o[r].low,e.main.temp)):o[r]={high:e.main.temp,low:e.main.temp,condition:e.weather[0].main,description:e.weather[0].description,humidity:[],pressure:[],windSpeed:[],windDir:[],cloudCover:[],precipChance:[],hourlyForecast:[]},o[r].humidity.push(e.main.humidity),o[r].pressure.push(e.main.pressure),o[r].windSpeed.push((null===(a=e.wind)||void 0===a?void 0:a.speed)||0),(null===(n=e.wind)||void 0===n?void 0:n.deg)&&o[r].windDir.push(b(e.wind.deg)),o[r].cloudCover.push((null===(l=e.clouds)||void 0===l?void 0:l.all)||0);let s=e.weather[0].main.toLowerCase().includes("rain")?Math.min(e.main.humidity/100*100,85):0;o[r].precipChance.push(s),o[r].hourlyForecast.length<8&&o[r].hourlyForecast.push({time:i,temp:t?Math.round(e.main.temp):d(e.main.temp),condition:x(e.weather[0].main),precipChance:Math.round(s)})}),Object.entries(o).map(e=>{let[a,n]=e,l=Math.round(n.humidity.reduce((e,t)=>e+t,0)/n.humidity.length),r=Math.round(n.pressure.reduce((e,t)=>e+t,0)/n.pressure.length),i=Math.round(n.windSpeed.reduce((e,t)=>e+t,0)/n.windSpeed.length),s=Math.round(n.cloudCover.reduce((e,t)=>e+t,0)/n.cloudCover.length),c=Math.round(n.precipChance.reduce((e,t)=>e+t,0)/n.precipChance.length),u=n.windDir.length>0?n.windDir.sort((e,t)=>n.windDir.filter(t=>t===e).length-n.windDir.filter(e=>e===t).length).pop():void 0;return{day:a,date:new Date(Date.now()+864e5*Object.keys(o).indexOf(a)).toLocaleDateString("en-US",{month:"short",day:"numeric"}),highTemp:t?Math.round(n.high):d(n.high),lowTemp:t?Math.round(n.low):d(n.low),condition:x(n.condition),description:n.description,details:{humidity:l,windSpeed:i,windDirection:u,pressure:"".concat(r," hPa"),cloudCover:s,precipitationChance:c>0?c:void 0,visibility:void 0,uvIndex:void 0},hourlyForecast:n.hourlyForecast}})},b=e=>["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(e/22.5)%16],v=(e,t,o)=>"inHg"===o||void 0===o&&A(t)?"".concat((.02953*e).toFixed(2)," in"):"".concat(Math.round(e)," hPa"),A=e=>["US","CA","PR","VI","GU","AS","MP"].includes(e),N=async(e,t,o)=>{console.log("=== UV INDEX REAL-TIME DEBUG ==="),console.log("Coordinates:",{lat:e,lon:t});try{var a,l;let r="".concat("https://api.openweathermap.org/data/3.0","/onecall?lat=").concat(e,"&lon=").concat(t,"&exclude=minutely,daily,alerts&appid=").concat(o);console.log("One Call API URL for UV Index:",r);let i=await fetch(r);if(console.log("One Call API Response Status:",i.status),!i.ok){console.error("One Call API failed for UV Index:",i.status,i.statusText),console.log("Falling back to basic UV endpoint (daily maximum)...");let a="".concat(n,"/uvi?lat=").concat(e,"&lon=").concat(t,"&appid=").concat(o),l=await fetch(a);if(l.ok){let e=await l.json(),t=e.value||e.uvi||0;console.log("Fallback daily maximum UV Index:",t);let o=new Date().getHours(),a=I(t,o);return console.log("Estimated current UV from daily max:",a),Math.round(a)}return 0}let s=await i.json();console.log("One Call API Response Data:",s);let c=(null===(a=s.current)||void 0===a?void 0:a.uvi)||0;if(console.log("Current UV Index from One Call API:",c),0===c){let e=(null===(l=s.current)||void 0===l?void 0:l.dt)||Date.now()/1e3,t=s.timezone_offset||0,o=new Date(1e3*(e+t)).getHours();return console.log("Local hour:",o),console.log("UV Index: 0 (likely nighttime)"),0}let d=Math.round(c);return console.log("Final UV Index (rounded):",d),d}catch(e){return console.error("UV Index API error:",e),0}},I=(e,t)=>{if(t<6||t>18)return 0;let o=Math.abs(t-13),a=Math.exp(-(o*o)/18),n=e*a;return console.log("UV estimation: hour=".concat(t,", dailyMax=").concat(e,", multiplier=").concat(a.toFixed(3),", estimated=").concat(n.toFixed(2))),Math.max(0,n)},P=async(e,t,o)=>{var a,l,r,s,c,d,u,h,g,m,p,x,f,y,w,b,v,A,N;console.log("=== POLLEN DATA DEBUG ==="),console.log("Coordinates:",{lat:e,lon:t}),console.log("OpenWeather API Key available:",!!o);let I=i();if(console.log("Google Pollen API Key available:",!!I),I)try{console.log("\uD83D\uDD0D Attempting to fetch real pollen data from Google Pollen API...");let o="https://pollen.googleapis.com/v1/forecast:lookup?key=".concat(I,"&location.latitude=").concat(e,"&location.longitude=").concat(t,"&days=1");console.log("Google Pollen API URL:",o);let n=await fetch(o);if(console.log("Google Pollen API Response Status:",n.status),console.log("Google Pollen API Response Headers:",Object.fromEntries(n.headers.entries())),n.ok){let e=await n.json();console.log("Google Pollen API Response Data:",e),console.log("Full Google Pollen API Response:",JSON.stringify(e,null,2));let t=null===(a=e.dailyInfo)||void 0===a?void 0:a[0];if(console.log("Daily Info:",t),t){console.log("Pollen Type Info:",t.pollenTypeInfo),console.log("Plant Info:",t.plantInfo);let e=e=>0===e?"No Data":e<=2?"Low":e<=5?"Moderate":e<=8?"High":"Very High",o=(t,o)=>{let a={};return null==t||t.forEach(t=>{let n=t.code||t.displayName||"";if(o.some(e=>n.includes(e))){var l,r;let o=(null===(l=t.indexInfo)||void 0===l?void 0:l.value)||0,i=(null===(r=t.indexInfo)||void 0===r?void 0:r.category)||e(o);a[t.displayName||n]=i}}),a},a=t.plantInfo||[],n=o(a,["MAPLE","ELM","COTTONWOOD","ALDER","BIRCH","ASH","PINE","OAK","JUNIPER"]),i=o(a,["GRAMINALES"]),p=o(a,["RAGWEED","WEED"]),x=null===(l=t.pollenTypeInfo)||void 0===l?void 0:l.find(e=>"TREE"===e.code),f=null===(r=t.pollenTypeInfo)||void 0===r?void 0:r.find(e=>"GRASS"===e.code),y=null===(s=t.pollenTypeInfo)||void 0===s?void 0:s.find(e=>"WEED"===e.code);0===Object.keys(n).length&&x&&(n.Tree=(null===(c=x.indexInfo)||void 0===c?void 0:c.category)||e((null===(d=x.indexInfo)||void 0===d?void 0:d.value)||0)),0===Object.keys(i).length&&f&&(i.Grass=(null===(u=f.indexInfo)||void 0===u?void 0:u.category)||e((null===(h=f.indexInfo)||void 0===h?void 0:h.value)||0)),0===Object.keys(p).length&&y&&(p.Weed=(null===(g=y.indexInfo)||void 0===g?void 0:g.category)||e((null===(m=y.indexInfo)||void 0===m?void 0:m.value)||0)),console.log("Tree breakdown:",n),console.log("Grass breakdown:",i),console.log("Weed breakdown:",p);let w={tree:n,grass:i,weed:p};return console.log("Final parsed pollen data from Google API:",w),w}console.warn("No daily pollen info found in Google API response"),console.log("Available keys in response:",Object.keys(e))}else{console.error("Google Pollen API failed:",n.status,n.statusText);let e=await n.text();console.error("Error response:",e)}}catch(e){console.error("Google Pollen API error:",e)}console.log("\uD83D\uDD04 Falling back to OpenWeather Air Pollution API for basic air quality data...");try{let a="".concat(n,"/air_pollution?lat=").concat(e,"&lon=").concat(t,"&appid=").concat(o);console.log("OpenWeather Air Pollution API URL:",a);let l=await fetch(a);if(console.log("OpenWeather Air Pollution API Response Status:",l.status),!l.ok)return console.warn("OpenWeather Air Pollution API failed:",l.status,l.statusText),{tree:{Tree:"No Data"},grass:{Grass:"No Data"},weed:{Weed:"No Data"}};let r=await l.json();console.log("OpenWeather Air Pollution API Response Data:",r);let i=(null===(f=r.list)||void 0===f?void 0:null===(x=f[0])||void 0===x?void 0:null===(p=x.main)||void 0===p?void 0:p.aqi)||1,s=(null===(b=r.list)||void 0===b?void 0:null===(w=b[0])||void 0===w?void 0:null===(y=w.components)||void 0===y?void 0:y.pm10)||0,c=(null===(N=r.list)||void 0===N?void 0:null===(A=N[0])||void 0===A?void 0:null===(v=A.components)||void 0===v?void 0:v.pm2_5)||0;console.log("Air quality fallback data:",{airQualityIndex:i,pm10:s,pm2_5:c});let d=e=>0===e?"No Data":e<=2?"Low":e<=5?"Moderate":e<=8?"High":"Very High",u={tree:{Tree:d(Math.min(Math.round(10*i),100))},grass:{Grass:d(Math.min(Math.round(8*i),100))},weed:{Weed:d(Math.min(Math.round(6*i),100))}};return console.log("Fallback pollen data (air quality based):",u),console.log("Note: Using air quality fallback. For real pollen data, ensure Google Pollen API key is properly configured."),u}catch(e){return console.warn("OpenWeather Air Pollution API error:",e),console.log("Returning default pollen values"),{tree:{Tree:"No Data"},grass:{Grass:"No Data"},weed:{Weed:"No Data"}}}},T=async(e,t,o)=>{var a,l,s,c,d,u,h,g;console.log("=== FETCHING AIR QUALITY DATA ==="),console.log("=== AIR QUALITY COORDINATE DEBUG ==="),console.log("City being searched:",o||"Unknown"),console.log("Coordinates passed to Air Quality API:",{latitude:e,longitude:t}),console.log("Timestamp:",new Date().toISOString()),console.log("Previous coordinates (if cached):",globalThis.lastAirQualityCoordinates),globalThis.lastAirQualityCoordinates={latitude:e,longitude:t},console.log("Fetching Air Quality for:",o||"Unknown","at coordinates:",e,t);let m=i();if(console.log("Google Air Quality API Key available:",!!m),m)try{let o="https://airquality.googleapis.com/v1/currentConditions:lookup?key=".concat(m),n=JSON.stringify({location:{latitude:e,longitude:t}});console.log("Google Air Quality API URL:",o),console.log("Google Air Quality API Payload:",n);let r=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:n});if(console.log("Google Air Quality API Response Status:",r.status),console.log("Google Air Quality API Response Headers:",Object.fromEntries(r.headers.entries())),r.ok){let e=await r.json();console.log("Google Air Quality API Response Data:",e),console.log("Full Google Air Quality API Response:",JSON.stringify(e,null,2));let t=null==e?void 0:e.indexes;console.log("Google AQI Indexes:",t);let o=(null==t?void 0:null===(a=t[0])||void 0===a?void 0:a.aqi)||0,n=(null==t?void 0:null===(l=t[0])||void 0===l?void 0:l.category)||"No Data";console.log("Google AQI value extracted:",o),console.log("Google AQI category extracted:",n);let i=null==e?void 0:null===(s=e.indexes)||void 0===s?void 0:s[0];i&&console.log("Google AQI additional info:",{displayName:i.displayName,aqiDisplay:i.aqiDisplay,category:i.category,dominantPollutant:i.dominantPollutant});let c={aqi:o,category:n};return console.log("Final Google air quality object:",c),c}{console.error("Google Air Quality API failed:",r.status,r.statusText);let e=await r.text();console.error("Google API Error response:",e)}}catch(e){console.error("Google Air Quality API error:",e)}else console.warn("No Google Air Quality API key found.");console.log("\uD83D\uDD04 Falling back to OpenWeather Air Pollution API...");try{let o=r(),a="".concat(n,"/air_pollution?lat=").concat(e,"&lon=").concat(t,"&appid=").concat(o);console.log("OpenWeather Air Pollution API URL:",a);let l=await fetch(a);if(console.log("OpenWeather Air Pollution API Response Status:",l.status),l.ok){let e=await l.json();console.log("OpenWeather Air Pollution API Response Data:",e);let t=(null===(u=e.list)||void 0===u?void 0:null===(d=u[0])||void 0===d?void 0:null===(c=d.main)||void 0===c?void 0:c.aqi)||1,o=(null===(g=e.list)||void 0===g?void 0:null===(h=g[0])||void 0===h?void 0:h.components)||{};console.log("OpenWeather AQI (1-5 scale):",t),console.log("OpenWeather components:",o);let a=E(t,o),n=j(a);return console.log("Converted OpenWeather AQI to EPA scale:",a),console.log("AQI Category:",n),{aqi:a,category:n}}console.error("OpenWeather Air Pollution API failed:",l.status,l.statusText)}catch(e){console.error("OpenWeather Air Pollution API error:",e)}return console.warn("All AQI APIs failed. Returning default values."),{aqi:0,category:"No Data"}},E=(e,t)=>{let o={1:{min:0,max:50},2:{min:51,max:100},3:{min:101,max:150},4:{min:151,max:200},5:{min:201,max:300}},a=o[e]||o[1];if(t.pm2_5&&t.pm10){let e=F(t.pm2_5),o=C(t.pm10);return console.log("PM2.5 AQI calculation:",{pm25:t.pm2_5,aqi:e}),console.log("PM10 AQI calculation:",{pm10:t.pm10,aqi:o}),Math.max(e,o)}let n=Math.round((a.min+a.max)/2);return console.log("OpenWeather AQI ".concat(e," converted to EPA AQI: ").concat(n," (range: ").concat(a.min,"-").concat(a.max,")")),n},F=e=>{for(let t of[{low:0,high:12,aqiLow:0,aqiHigh:50},{low:12.1,high:35.4,aqiLow:51,aqiHigh:100},{low:35.5,high:55.4,aqiLow:101,aqiHigh:150},{low:55.5,high:150.4,aqiLow:151,aqiHigh:200},{low:150.5,high:250.4,aqiLow:201,aqiHigh:300},{low:250.5,high:350.4,aqiLow:301,aqiHigh:400},{low:350.5,high:500.4,aqiLow:401,aqiHigh:500}])if(e>=t.low&&e<=t.high)return Math.round((t.aqiHigh-t.aqiLow)/(t.high-t.low)*(e-t.low)+t.aqiLow);return 500},C=e=>{for(let t of[{low:0,high:54,aqiLow:0,aqiHigh:50},{low:55,high:154,aqiLow:51,aqiHigh:100},{low:155,high:254,aqiLow:101,aqiHigh:150},{low:255,high:354,aqiLow:151,aqiHigh:200},{low:355,high:424,aqiLow:201,aqiHigh:300},{low:425,high:504,aqiLow:301,aqiHigh:400},{low:505,high:604,aqiLow:401,aqiHigh:500}])if(e>=t.low&&e<=t.high)return Math.round((t.aqiHigh-t.aqiLow)/(t.high-t.low)*(e-t.low)+t.aqiLow);return 500},j=e=>e<=50?"Good":e<=100?"Moderate":e<=150?"Unhealthy for Sensitive Groups":e<=200?"Unhealthy":e<=300?"Very Unhealthy":"Hazardous",k=async(e,t)=>{console.log("Fetching weather data for:",e);try{let t=r(),o=p(e);console.log("Parsed location query:",o);let{lat:a,lon:l,displayName:i}=await f(o,t);console.log("Geocoded location:",{lat:a,lon:l,displayName:i});let d="".concat(n,"/weather?lat=").concat(a,"&lon=").concat(l,"&appid=").concat(t,"&units=imperial");console.log("Fetching current weather from:",d);let u=await fetch(d);if(!u.ok)throw Error("Current weather API call failed: ".concat(u.status));let m=await u.json();console.log("Current weather response:",m);let x="".concat(n,"/forecast?lat=").concat(a,"&lon=").concat(l,"&appid=").concat(t,"&units=imperial");console.log("Fetching forecast from:",x);let b=await fetch(x);if(!b.ok)throw Error("Forecast API call failed: ".concat(b.status));let A=await b.json();console.log("Forecast response:",A);let I=m.sys.country,E=h(I);console.log("Using Fahrenheit:",E);let F=g(m.main.temp,I);console.log("Formatted temperature:",F);let C=w(A,E);console.log("Processed forecast:",C);let j=y();console.log("Moon phase:",j),console.log("=== FETCHING UV INDEX ===");let k=await N(a,l,t);console.log("UV Index fetched:",k);let S=await P(a,l,t);console.log("Weather Data - Pollen:",S);let _=await T(a,l,i);console.log("Weather Data - Air Quality:",_);let O={location:i,country:I,temperature:F.value,unit:F.unit,condition:m.weather[0].main,description:m.weather[0].description,humidity:m.main.humidity,wind:{speed:m.wind.speed,direction:m.wind.deg?s(m.wind.deg):void 0,gust:m.wind.gust},pressure:v(m.main.pressure,I),sunrise:c(m.sys.sunrise,m.timezone),sunset:c(m.sys.sunset,m.timezone),forecast:C,moonPhase:j,uvIndex:k,aqi:_.aqi,aqiCategory:_.category,pollen:S};return console.log("Final weather data:",O),O}catch(e){throw console.error("Error fetching weather data:",e),e}},S=e=>{switch(e.type){case"zip":return"ZIP/Postal code not found. Please check the code and try again.";case"city_state":return'City/State combination not found. Try "City, State" format (e.g., "New York, NY").';case"city_country":return'City/Country combination not found. Try "City, Country" format (e.g., "London, UK").';case"city_only":return'City not found. Try including state/country (e.g., "Paris, France").';default:return"Location not found. Please check the spelling and try again."}},_=async e=>{let t=r(),[o,a]=e.split(",").map(Number);if(isNaN(o)||isNaN(a))throw Error("Invalid coordinates");try{let e="".concat(n,"/weather?lat=").concat(o,"&lon=").concat(a,"&appid=").concat(t,"&units=imperial");console.log("Fetching current weather from:",e);let l=await fetch(e);if(!l.ok)throw Error("Current weather API call failed: ".concat(l.status));let r=await l.json();console.log("Current weather response:",r);let i="".concat(n,"/forecast?lat=").concat(o,"&lon=").concat(a,"&appid=").concat(t,"&units=imperial");console.log("Fetching forecast from:",i);let d=await fetch(i);if(!d.ok)throw Error("Forecast API call failed: ".concat(d.status));let u=await d.json();console.log("Forecast response:",u);let m=r.sys.country,p=h(m);console.log("Using Fahrenheit:",p);let x=g(r.main.temp,m);console.log("Formatted temperature:",x);let f=w(u,p);console.log("Processed forecast:",f);let b=y();console.log("Moon phase:",b),console.log("=== FETCHING UV INDEX ===");let A=await N(o,a,t);console.log("UV Index fetched:",A),console.log("=== FETCHING POLLEN DATA ===");let I=await P(o,a,t);console.log("Weather Data - Pollen:",I);let E=await T(o,a,"".concat(r.name,", ").concat(r.sys.country));console.log("Weather Data - Air Quality:",E);let F={location:"".concat(r.name,", ").concat(r.sys.country),country:m,temperature:x.value,unit:x.unit,condition:r.weather[0].main,description:r.weather[0].description,humidity:r.main.humidity,wind:{speed:r.wind.speed,direction:r.wind.deg?s(r.wind.deg):void 0,gust:r.wind.gust},pressure:v(r.main.pressure,m),sunrise:c(r.sys.sunrise,r.timezone),sunset:c(r.sys.sunset,r.timezone),forecast:f,moonPhase:b,uvIndex:A,aqi:E.aqi,aqiCategory:E.category,pollen:I};return console.log("Final weather data:",F),F}catch(e){throw console.error("Error fetching weather data:",e),e}}}}]);