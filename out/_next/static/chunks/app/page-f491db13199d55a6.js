(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1441:(e,t,o)=>{Promise.resolve().then(o.bind(o,5678))},5678:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>v});var r=o(5155);o(9137);var a=o(2115),n=o(1154),s=o(3999),c=o(5631),i=o(9304),l=o(2402),d=o(1828),h=o(581);class f{static getInstance(){return f.instance||(f.instance=new f),f.instance}isGeolocationSupported(){return"geolocation"in navigator}async getPermissionStatus(){if(!this.isGeolocationSupported())return{granted:!1,denied:!1,prompt:!1,supported:!1};try{if("permissions"in navigator){let e=await navigator.permissions.query({name:"geolocation"});return{granted:"granted"===e.state,denied:"denied"===e.state,prompt:"prompt"===e.state,supported:!0}}}catch(e){console.warn("Permissions API not available:",e)}return{granted:!1,denied:!1,prompt:!0,supported:!0}}async getCurrentLocation(e){let t={enableHighAccuracy:!1,timeout:5e3,maximumAge:3e5,useCache:!0,...e};if(t.useCache&&this.currentPosition&&Date.now()-this.lastRequestTime<this.CACHE_DURATION)return console.log("Returning cached location:",this.currentPosition),this.currentPosition;if(!this.isGeolocationSupported())throw this.createLocationError("NOT_SUPPORTED","Geolocation is not supported by this browser");try{console.log("Requesting geolocation with options:",t);let e=await new Promise((e,o)=>{navigator.geolocation.getCurrentPosition(e,o,{enableHighAccuracy:t.enableHighAccuracy,timeout:t.timeout,maximumAge:t.maximumAge})});console.log("Geolocation success:",e);let o=await this.reverseGeocode(e.coords.latitude,e.coords.longitude);return this.currentPosition={...o,source:"geolocation"},this.lastRequestTime=Date.now(),this.currentPosition}catch(e){throw console.error("Geolocation error:",e),this.handleGeolocationError(e)}}async getLocationByIP(){console.log("Attempting IP-based location detection...");try{for(let e of["https://ipapi.co/json/","https://ipinfo.io/json","https://api.ipgeolocation.io/ipgeo?apiKey=free"])try{console.log("Trying IP service: ".concat(e));let t=await fetch(e);if(!t.ok){console.warn("IP service failed: ".concat(e," - ").concat(t.status));continue}let o=await t.json();console.log("IP service response from ".concat(e,":"),o);let r=this.parseIPLocationResponse(o,e);if(r)return console.log("IP-based location detected:",r),{...r,source:"ip"}}catch(t){console.warn("IP service error for ".concat(e,":"),t);continue}throw this.createLocationError("NETWORK_ERROR","All IP-based location services failed")}catch(e){throw console.error("IP location detection failed:",e),e}}async reverseGeocode(e,t){try{let o=await fetch("https://nominatim.openstreetmap.org/reverse?lat=".concat(e,"&lon=").concat(t,"&format=json&accept-language=en"));if(!o.ok)throw Error("Reverse geocoding failed: ".concat(o.status));let r=await o.json();console.log("Reverse geocoding response:",r);let a=r.address||{},n=a.city||a.town||a.village||a.hamlet||"Unknown City",s=a.state||a.province||a.region||"",c=a.country||"Unknown Country";return{latitude:e,longitude:t,city:n,region:s,country:c,displayName:s?"".concat(n,", ").concat(s,", ").concat(c):"".concat(n,", ").concat(c),source:"geolocation"}}catch(o){return console.warn("Reverse geocoding failed, using coordinates:",o),{latitude:e,longitude:t,displayName:"".concat(e.toFixed(4),", ").concat(t.toFixed(4)),source:"geolocation"}}}parseIPLocationResponse(e,t){try{let o,r,a,n,s;if(t.includes("ipapi.co"))o=parseFloat(e.latitude),r=parseFloat(e.longitude),a=e.city||"Unknown City",n=e.region||"",s=e.country_name||e.country||"Unknown Country";else if(t.includes("ipinfo.io")){let[t,c]=(e.loc||"0,0").split(",").map(parseFloat);o=t,r=c,a=e.city||"Unknown City",n=e.region||"",s=e.country||"Unknown Country"}else{if(!t.includes("ipgeolocation.io"))return null;o=parseFloat(e.latitude),r=parseFloat(e.longitude),a=e.city||"Unknown City",n=e.state_prov||"",s=e.country_name||"Unknown Country"}if(isNaN(o)||isNaN(r))return console.warn("Invalid coordinates from IP service:",e),null;return{latitude:o,longitude:r,city:a,region:n,country:s,displayName:n?"".concat(a,", ").concat(n,", ").concat(s):"".concat(a,", ").concat(s),source:"geolocation"}}catch(e){return console.warn("Failed to parse IP location response:",e),null}}async getLocationWithFallback(e){let t={skipGeolocation:!1,skipIPFallback:!1,...e};if(!t.skipGeolocation)try{return console.log("Attempting geolocation detection..."),await this.getCurrentLocation()}catch(e){if(console.log("Geolocation failed, trying fallback:",e.message),"PERMISSION_DENIED"===e.code)throw e}if(!t.skipIPFallback)try{return console.log("Attempting IP-based location detection..."),await this.getLocationByIP()}catch(e){console.log("IP-based detection failed:",e)}throw this.createLocationError("POSITION_UNAVAILABLE","Unable to determine your location automatically","Please enter your location manually or allow location access")}clearCache(){this.currentPosition=null,this.lastRequestTime=0,console.log("Location cache cleared")}handleGeolocationError(e){switch(e.code){case e.PERMISSION_DENIED:return this.createLocationError("PERMISSION_DENIED","Location access denied","Please allow location access in your browser settings or enter your location manually");case e.POSITION_UNAVAILABLE:return this.createLocationError("POSITION_UNAVAILABLE","Location information unavailable","Please check your device location settings or enter your location manually");case e.TIMEOUT:return this.createLocationError("TIMEOUT","Location request timed out","Please try again or enter your location manually");default:return this.createLocationError("POSITION_UNAVAILABLE","Failed to get location","Please try again or enter your location manually")}}createLocationError(e,t,o){return{code:e,message:t,suggestion:o}}formatLocationDisplay(e){return e.city&&e.region&&e.country?"".concat(e.city,", ").concat(e.region,", ").concat(e.country):e.city&&e.country?"".concat(e.city,", ").concat(e.country):e.displayName?e.displayName:"".concat(e.latitude.toFixed(4),", ").concat(e.longitude.toFixed(4))}getCoordinateString(e){return"".concat(e.latitude,",").concat(e.longitude)}getCachedLocation(){return this.currentPosition&&Date.now()-this.lastRequestTime<this.CACHE_DURATION?this.currentPosition:null}constructor(){this.currentPosition=null,this.lastRequestTime=0,this.CACHE_DURATION=3e5}}let u=f.getInstance();class m{static getInstance(){return m.instance||(m.instance=new m),m.instance}initializeDefaults(){if(!this.getPreferences()){let e={settings:{units:"imperial",theme:"dark",cacheEnabled:!0},updatedAt:Date.now()};this.savePreferences(e)}}isStorageAvailable(){try{let e=this.STORAGE_PREFIX+"test";return localStorage.setItem(e,"test"),localStorage.removeItem(e),!0}catch(e){return console.warn("localStorage not available:",e),!1}}getPreferences(){if(!this.isStorageAvailable())return null;try{let e=localStorage.getItem(this.STORAGE_PREFIX+this.PREFERENCES_KEY);if(e){let t=JSON.parse(e);return this.validateAndMigratePreferences(t)}}catch(e){console.warn("Failed to get preferences:",e),this.handleCorruptedData(this.PREFERENCES_KEY)}return null}savePreferences(e){if(!this.isStorageAvailable())return!1;try{e.updatedAt=Date.now();let t=JSON.stringify(e);return localStorage.setItem(this.STORAGE_PREFIX+this.PREFERENCES_KEY,t),console.log("Preferences saved successfully"),!0}catch(e){return console.error("Failed to save preferences:",e),this.handleStorageQuotaExceeded(),!1}}updateSettings(e){let t=this.getPreferences();return!!t&&(t.settings={...t.settings,...e},this.savePreferences(t))}saveLastLocation(e){let t=this.getPreferences();return!!t&&(t.lastLocation=e,this.savePreferences(t))}getLastLocation(){let e=this.getPreferences();return(null==e?void 0:e.lastLocation)||null}cacheWeatherData(e,t,o){if(!this.isStorageAvailable())return!1;let r=this.getPreferences();if(!(null==r?void 0:r.settings.cacheEnabled))return!1;try{let r=o||this.DEFAULT_WEATHER_CACHE_DURATION,a={data:t,timestamp:Date.now(),expiresAt:Date.now()+r,locationKey:e},n=this.STORAGE_PREFIX+this.WEATHER_CACHE_KEY+"_"+this.sanitizeKey(e);return localStorage.setItem(n,JSON.stringify(a)),console.log("Weather data cached for ".concat(e,", expires in ").concat(Math.round(r/1e3/60)," minutes")),!0}catch(e){return console.warn("Failed to cache weather data:",e),this.handleStorageQuotaExceeded(),!1}}getCachedWeatherData(e){if(!this.isStorageAvailable())return null;try{let t=this.STORAGE_PREFIX+this.WEATHER_CACHE_KEY+"_"+this.sanitizeKey(e),o=localStorage.getItem(t);if(o){let r=JSON.parse(o);if(Date.now()<r.expiresAt)return console.log("Using cached weather data for ".concat(e)),r.data;localStorage.removeItem(t),console.log("Cached weather data expired for ".concat(e))}}catch(t){console.warn("Failed to get cached weather data:",t),this.handleCorruptedData(e)}return null}clearWeatherCache(e){if(!this.isStorageAvailable())return!1;try{if(e){let t=this.STORAGE_PREFIX+this.WEATHER_CACHE_KEY+"_"+this.sanitizeKey(e);localStorage.removeItem(t),console.log("Weather cache cleared for ".concat(e))}else{let e=Object.keys(localStorage).filter(e=>e.startsWith(this.STORAGE_PREFIX+this.WEATHER_CACHE_KEY));e.forEach(e=>localStorage.removeItem(e)),console.log("All weather cache cleared (".concat(e.length," entries)"))}return!0}catch(e){return console.error("Failed to clear weather cache:",e),!1}}getCacheMetrics(){let e={totalEntries:0,totalSize:0,expiredEntries:0};if(!this.isStorageAvailable())return e;try{let t=Object.keys(localStorage).filter(e=>e.startsWith(this.STORAGE_PREFIX+this.WEATHER_CACHE_KEY)),o=Date.now(),r=0;t.forEach(t=>{try{let a=localStorage.getItem(t);if(a){e.totalSize+=2*a.length,e.totalEntries++;let t=JSON.parse(a);t.timestamp<o&&(o=t.timestamp),t.timestamp>r&&(r=t.timestamp),Date.now()>t.expiresAt&&e.expiredEntries++}}catch(o){console.warn("Corrupted cache entry: ".concat(t)),e.expiredEntries++}}),e.totalEntries>0&&(e.oldestEntry=o,e.newestEntry=r)}catch(e){console.error("Failed to get cache metrics:",e)}return e}performMaintenanceCleanup(){if(this.isStorageAvailable())try{let e=this.getCacheMetrics();console.log("Cache metrics before cleanup:",e),e.expiredEntries>0&&this.cleanupExpiredEntries(),e.totalSize>this.MAX_CACHE_SIZE&&this.cleanupOldestEntries(),console.log("Cache maintenance completed")}catch(e){console.error("Cache maintenance failed:",e)}}cleanupExpiredEntries(){let e=Object.keys(localStorage).filter(e=>e.startsWith(this.STORAGE_PREFIX+this.WEATHER_CACHE_KEY)),t=0;e.forEach(e=>{try{let o=localStorage.getItem(e);if(o){let r=JSON.parse(o);Date.now()>r.expiresAt&&(localStorage.removeItem(e),t++)}}catch(o){localStorage.removeItem(e),t++}}),console.log("Removed ".concat(t," expired/corrupted cache entries"))}cleanupOldestEntries(){let e=Object.keys(localStorage).filter(e=>e.startsWith(this.STORAGE_PREFIX+this.WEATHER_CACHE_KEY)),t=[];e.forEach(e=>{try{let o=localStorage.getItem(e);if(o){let r=JSON.parse(o);t.push({key:e,timestamp:r.timestamp,size:2*o.length})}}catch(o){t.push({key:e,timestamp:0,size:0})}}),t.sort((e,t)=>e.timestamp-t.timestamp);let o=t.reduce((e,t)=>e+t.size,0),r=0;for(;o>this.MAX_CACHE_SIZE&&t.length>0;){let e=t.shift();localStorage.removeItem(e.key),o-=e.size,r++}console.log("Removed ".concat(r," old cache entries to reduce size"))}handleCorruptedData(e){try{let t=this.STORAGE_PREFIX+e;localStorage.removeItem(t),console.log("Removed corrupted data: ".concat(e))}catch(e){console.error("Failed to remove corrupted data:",e)}}handleStorageQuotaExceeded(){console.warn("Storage quota exceeded, performing emergency cleanup"),this.cleanupOldestEntries(),this.cleanupExpiredEntries()}validateAndMigratePreferences(e){let t={settings:{units:"imperial",theme:"dark",cacheEnabled:!0},updatedAt:Date.now()};return{...t,...e,settings:{...t.settings,...e.settings}}}sanitizeKey(e){return e.replace(/[^a-zA-Z0-9_-]/g,"_").substring(0,50)}clearAllData(){if(!this.isStorageAvailable())return!1;try{let e=Object.keys(localStorage).filter(e=>e.startsWith(this.STORAGE_PREFIX));return e.forEach(e=>localStorage.removeItem(e)),console.log("All user data cleared (".concat(e.length," entries)")),this.initializeDefaults(),!0}catch(e){return console.error("Failed to clear all data:",e),!1}}exportUserData(){try{let e=this.getPreferences(),t=this.getCacheMetrics(),o={version:"1.0",timestamp:Date.now(),preferences:e,cacheMetrics:t};return JSON.stringify(o,null,2)}catch(e){return console.error("Failed to export user data:",e),null}}importUserData(e){try{let t=JSON.parse(e);if(t.preferences){let e=this.validateAndMigratePreferences(t.preferences);return this.savePreferences(e)}return!1}catch(e){return console.error("Failed to import user data:",e),!1}}getLocationKey(e){return"".concat(e.latitude.toFixed(4),"_").concat(e.longitude.toFixed(4))}getLocationKeyFromCoords(e){let[t,o]=e.split(",").map(parseFloat);return"".concat(t.toFixed(4),"_").concat(o.toFixed(4))}constructor(){this.STORAGE_PREFIX="bitweather_",this.PREFERENCES_KEY="user_preferences",this.WEATHER_CACHE_KEY="weather_cache",this.DEFAULT_WEATHER_CACHE_DURATION=6e5,this.DEFAULT_LOCATION_CACHE_DURATION=864e5,this.MAX_CACHE_SIZE=5242880,this.initializeDefaults(),this.performMaintenanceCleanup()}}let g=m.getInstance();var x=o(8983),p=o(9159),b=o(9509);let E=b.env.NEXT_PUBLIC_OPENWEATHER_API_KEY||b.env.REACT_APP_OPENWEATHER_API_KEY;console.log("\uD83D\uDD0D MAIN PAGE ENVIRONMENT DEBUG:"),console.log("NODE_ENV:","production"),console.log("NEXT_PUBLIC_OPENWEATHER_API_KEY:",b.env.NEXT_PUBLIC_OPENWEATHER_API_KEY?"SET":"MISSING"),console.log("REACT_APP_OPENWEATHER_API_KEY:",b.env.REACT_APP_OPENWEATHER_API_KEY?"SET":"MISSING"),console.log("Final API_KEY:",E?"SET":"MISSING"),E?console.log("✅ OpenWeather API key found:",E.substring(0,8)+"..."):(console.error("❌ OpenWeather API key is missing!"),console.error("Please set either NEXT_PUBLIC_OPENWEATHER_API_KEY or REACT_APP_OPENWEATHER_API_KEY environment variable."),console.error("For Next.js, use NEXT_PUBLIC_OPENWEATHER_API_KEY"));let w=b.env.NEXT_PUBLIC_GOOGLE_POLLEN_API_KEY||b.env.REACT_APP_GOOGLE_POLLEN_API_KEY;function y(){let{theme:e}=(0,i.D)(),[t,o]=(0,a.useState)(null),[f,m]=(0,a.useState)(!1),[b,w]=(0,a.useState)(""),[y,v]=(0,a.useState)(!1),[F,A]=(0,a.useState)(""),[N,S]=(0,a.useState)(""),[I,P]=(0,a.useState)(""),[_,C]=(0,a.useState)(!1),[T,k]=(0,a.useState)(10),[O,R]=(0,a.useState)(""),[j,L]=(0,a.useState)(!1),[D,H]=(0,a.useState)("dark"),[G,W]=(0,a.useState)(new Map),[U,K]=(0,a.useState)(null),[B,M]=(0,a.useState)(!1),[Y,X]=(0,a.useState)(!1),z="bitweather_city",q="bitweather_weather_data",J="bitweather_cache_timestamp",V="weather-app-rate-limit",Q="weather-search-cache";(0,a.useEffect)(()=>{L(!0)},[]),(0,a.useEffect)(()=>{if(!j||Y)return;let e=setTimeout(async()=>{try{let e=g.getLastLocation();if(e){console.log("Using cached last location:",e),await Z(e);return}let t=localStorage.getItem(z),o=localStorage.getItem(q),r=localStorage.getItem(J);if(t&&o&&r&&Date.now()-parseInt(r)<6e5){console.log("Using fresh cached data, skipping auto-location");return}console.log("Attempting silent location detection..."),M(!0);try{let e=await u.getCurrentLocation();await Z(e)}catch(e){console.log("Geolocation failed, trying IP fallback:",e.message);try{let e=await u.getLocationByIP();await Z(e)}catch(e){console.log("IP location also failed, using default location:",e),await eg("San Francisco, CA")}}finally{M(!1)}X(!0)}catch(e){console.error("Auto-location initialization failed:",e),M(!1),X(!0)}},1e3);return()=>clearTimeout(e)},[j,Y]);let Z=async e=>{try{console.log("Location detected:",e),g.saveLastLocation(e);let t=g.getLocationKey(e),r=g.getCachedWeatherData(t);if(r){console.log("Using cached weather data for detected location"),o(r),P(e.displayName),S(e.displayName),v(!0),w("");return}m(!0),w("");let a=g.getLocationKey(e).replace("_",","),n=await (0,c.fetchWeatherByLocation)(a);n&&(o(n),P(e.displayName),S(e.displayName),v(!0),g.cacheWeatherData(t,n),ei(e.displayName),el(n),console.log("Weather data loaded for auto-detected location"))}catch(e){console.error("Failed to load weather for detected location:",e),w("Failed to load weather data for your location")}finally{m(!1)}};(0,a.useEffect)(()=>{j&&W(ed())},[j]);let $=()=>{if(j)try{let e=localStorage.getItem(z);e&&(P(e),S(e))}catch(e){console.warn("Failed to load cached location:",e)}},ee=()=>{j&&H(eo())},et=e=>{o(e),w("")};(0,a.useEffect)(()=>{j&&($(),ee(),(async()=>{try{let e=localStorage.getItem(z),t=localStorage.getItem(q),o=localStorage.getItem(J);if(e&&t&&o&&Date.now()-parseInt(o)<6e5){let o=JSON.parse(t);et(o),P(e),v(!0);return}y||tryAutoLocation()}catch(e){console.warn("Cache check failed:",e)}})())},[j]);let eo=()=>{if(!j)return"dark";try{let e=localStorage.getItem("weather-edu-theme");if(e&&["dark","miami","tron"].includes(e))return e}catch(e){console.warn("Failed to get stored theme:",e)}return"dark"};(0,a.useEffect)(()=>{if(!j)return;H(eo());let e=()=>{H(eo())};window.addEventListener("storage",e);let t=setInterval(()=>{let e=eo();e!==D&&H(e)},100);return()=>{window.removeEventListener("storage",e),clearInterval(t)}},[j,D]);let er=(e=>{switch(e){case"dark":return{background:"bg-[#0f0f0f]",cardBg:"bg-[#0f0f0f]",borderColor:"border-[#00d4ff]",text:"text-[#e0e0e0]",headerText:"text-[#00d4ff]",secondaryText:"text-[#e0e0e0]",accentText:"text-[#00d4ff]",successText:"text-[#00ff00]",glow:"glow-dark",specialBorder:"border-[#00d4ff]",buttonHover:"hover:bg-[#00d4ff] hover:text-[#0f0f0f]"};case"miami":return{background:"bg-[#0a0025]",cardBg:"bg-[#0a0025]",borderColor:"border-[#ff1493]",text:"text-[#00ffff]",headerText:"text-[#ff1493]",secondaryText:"text-[#00ffff]",accentText:"text-[#ff1493]",successText:"text-[#00ff00]",glow:"glow-miami",specialBorder:"border-[#ff1493]",buttonHover:"hover:bg-[#ff1493] hover:text-[#0a0025]"};case"tron":return{background:"bg-black",cardBg:"bg-black",borderColor:"border-[#00FFFF]",text:"text-white",headerText:"text-[#00FFFF]",secondaryText:"text-[#00FFFF]",accentText:"text-[#00FFFF]",successText:"text-[#00ff00]",glow:"glow-tron",specialBorder:"border-[#00FFFF]",buttonHover:"hover:bg-[#00FFFF] hover:text-black"}}})(D),ea=()=>{if(!j)return{requests:[],lastReset:Date.now()};try{let e=localStorage.getItem(V);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to get rate limit data:",e)}return{requests:[],lastReset:Date.now()}},en=e=>{if(j)try{localStorage.setItem(V,JSON.stringify(e))}catch(e){console.warn("Failed to save rate limit data:",e)}},es=()=>{let e=Date.now(),t=ea();e-t.lastReset>36e5&&en(t={requests:[],lastReset:e});let o=t.requests.filter(t=>e-t<36e5),r=10-o.length;if(o.length>=10){let t=Math.ceil((36e5-(e-Math.min(...o)))/1e3/60);return{allowed:!1,remaining:0,message:"Too many requests. Please wait ".concat(t," minutes before searching again.")}}return{allowed:!0,remaining:r}},ec=()=>{let e=Date.now(),t=ea();t.requests.push(e),t.requests=t.requests.filter(t=>e-t<36e5),en(t)};(0,a.useEffect)(()=>{if(!j)return;let{remaining:e}=es();k(e)},[j]);let ei=e=>{if(j)try{localStorage.setItem(z,e)}catch(e){console.warn("Failed to save location to cache:",e)}},el=e=>{if(j)try{localStorage.setItem(q,JSON.stringify(e)),localStorage.setItem(J,Date.now().toString())}catch(e){console.warn("Failed to save weather data to cache:",e)}},ed=()=>{if(!j)return new Map;try{let e=localStorage.getItem(Q);if(e){let t=JSON.parse(e),o=new Map,r=Date.now();for(let[e,a]of Object.entries(t))"object"==typeof a&&null!==a&&"data"in a&&"timestamp"in a&&r-a.timestamp<3e5&&o.set(e,a);return o}}catch(e){console.warn("Failed to get search cache:",e)}return new Map},eh=e=>{if(j)try{let t=Object.fromEntries(e);localStorage.setItem(Q,JSON.stringify(t))}catch(e){console.warn("Failed to save search cache:",e)}},ef=(e,t)=>{let o=ed();o.set(e.toLowerCase().trim(),{data:t,timestamp:Date.now()}),eh(o),W(o)},eu=e=>{let t=ed().get(e.toLowerCase().trim());return t&&Date.now()-t.timestamp<3e5?t.data:null},em=e=>{console.error("Weather data error:",e),w(e.message||"Failed to load weather data"),o(null)},eg=async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(console.log("Starting search for:",e),!e.trim()){w("Please enter a location");return}if(e.trim().length<3){w("Please enter at least 3 characters");return}if(!t){let e=es();if(!e.allowed){R(e.message||"Rate limit exceeded");return}}m(!0),w(""),R("");try{console.log("Fetching weather data...");let t=eu(e);if(t){console.log("Weather data found in cache"),o(t),v(!0),A(e),S(e);return}if(!E)throw Error("OpenWeather API key is not configured");let r=await (0,c.v)(e,E);if(console.log("Weather data received:",r),!r)throw Error("No weather data received");if(!r.temperature||!r.condition)throw Error("Invalid weather data received");o(r),v(!0),A(e),S(e),ei(e),el(r),ec(),ef(e,r),console.log("Search completed successfully")}catch(e){console.error("Search error:",e),em(e)}finally{m(!1)}},ex=async()=>{if(!u.isGeolocationSupported()){w("Geolocation is not supported by your browser");return}m(!0),w("");try{let e=await u.getCurrentLocation();await Z(e),ec()}catch(e){console.error("Location error:",e),w(e.message||"Failed to get your location")}finally{m(!1)}};return(0,r.jsxs)(l.A,{weatherLocation:null==t?void 0:t.location,weatherTemperature:null==t?void 0:t.temperature,weatherUnit:null==t?void 0:t.unit,children:[(0,r.jsx)("div",{className:(0,s.cn)("min-h-screen","dark"===e&&"bg-gradient-to-b from-gray-900 to-black","miami"===e&&"bg-gradient-to-b from-pink-900 to-purple-900","tron"===e&&"bg-gradient-to-b from-black to-blue-900"),children:(0,r.jsxs)(p.u,{maxWidth:"xl",padding:"md",children:[(0,r.jsx)(h.A,{onSearch:eg,onLocationSearch:ex,isLoading:f||B,error:b,rateLimitError:O,isDisabled:_,theme:e,hideLocationButton:!0}),!t&&!f&&!b&&(0,r.jsx)("div",{className:"text-center mt-8 mb-8 px-2 sm:px-0",children:(0,r.jsx)("div",{className:"w-full max-w-xl mx-auto",children:(0,r.jsx)("div",{className:(0,s.cn)("p-2 sm:p-3 border-2 shadow-lg","dark"===e&&"bg-[#0f0f0f] border-[#00d4ff] shadow-blue-500/20","miami"===e&&"bg-[#0a0025] border-[#ff1493] shadow-pink-500/30","tron"===e&&"bg-black border-[#00FFFF] shadow-cyan-500/40"),children:(0,r.jsx)("p",{className:"text-sm font-mono font-bold uppercase tracking-wider text-white",style:{fontFamily:"monospace",fontSize:"clamp(10px, 2.4vw, 14px)"},children:"► PRESS START TO INITIALIZE WEATHER DATA ◄"})})})}),(f||B)&&(0,r.jsxs)("div",{className:"flex justify-center items-center mt-8",children:[(0,r.jsx)(n.A,{className:(0,s.cn)("h-8 w-8 animate-spin","dark"===e&&"text-blue-500","miami"===e&&"text-pink-500","tron"===e&&"text-cyan-500")}),(0,r.jsx)("span",{className:"ml-2 text-white",children:B?"Detecting your location...":"Loading weather data..."})]}),b&&(0,r.jsx)("div",{className:"text-red-500 text-center mt-4",children:b}),O&&(0,r.jsx)("div",{className:"text-yellow-500 text-center mt-4",children:O}),t&&!f&&!b&&(0,r.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,r.jsxs)(p.N,{cols:{sm:1,md:3},className:"gap-4",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg text-center border-2 shadow-lg ".concat(er.cardBg," ").concat(er.borderColor),style:{boxShadow:"0 0 15px ".concat(er.borderColor.replace("border-[","").replace("]",""),"33")},children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 ".concat(er.headerText),children:"Temperature"}),(0,r.jsxs)("p",{className:"text-3xl font-bold ".concat(er.text),children:[t.temperature,t.unit]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg text-center border-2 shadow-lg ".concat(er.cardBg," ").concat(er.borderColor),style:{boxShadow:"0 0 15px ".concat(er.borderColor.replace("border-[","").replace("]",""),"33")},children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 ".concat(er.headerText),children:"Conditions"}),(0,r.jsx)("p",{className:"text-lg ".concat(er.text),children:t.condition}),(0,r.jsx)("p",{className:"text-sm ".concat(er.secondaryText),children:t.description})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg text-center border-2 shadow-lg ".concat(er.cardBg," ").concat(er.borderColor),style:{boxShadow:"0 0 15px ".concat(er.borderColor.replace("border-[","").replace("]",""),"33")},children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 ".concat(er.headerText),children:"Wind"}),(0,r.jsxs)("p",{className:"text-lg ".concat(er.text),children:[t.wind.direction?"".concat(t.wind.direction," "):"",t.wind.speed," mph",t.wind.gust?" (gusts ".concat(t.wind.gust," mph)"):""]})]})]}),(0,r.jsxs)(p.N,{cols:{sm:1,md:3},className:"gap-4",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg text-center border-2 shadow-lg ".concat(er.cardBg," ").concat(er.borderColor),style:{boxShadow:"0 0 15px ".concat(er.borderColor.replace("border-[","").replace("]",""),"33")},children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 ".concat(er.headerText),children:"Sun Times"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-yellow-400",children:"☀️"}),(0,r.jsxs)("p",{className:er.text,children:["Sunrise: ",t.sunrise]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-orange-400",children:"\uD83C\uDF05"}),(0,r.jsxs)("p",{className:er.text,children:["Sunset: ",t.sunset]})]})]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg text-center border-2 shadow-lg ".concat(er.cardBg," ").concat(er.borderColor),style:{boxShadow:"0 0 15px ".concat(er.borderColor.replace("border-[","").replace("]",""),"33")},children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 ".concat(er.headerText),children:"UV Index"}),(0,r.jsx)("p",{className:"text-lg font-bold ".concat(er.text),children:t.uvIndex})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg text-center border-2 shadow-lg ".concat(er.cardBg," ").concat(er.borderColor),style:{boxShadow:"0 0 15px ".concat(er.borderColor.replace("border-[","").replace("]",""),"33")},children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 ".concat(er.headerText),children:"Moon Phase"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:(e=>{let t=e.toLowerCase();return t.includes("new")?"●":t.includes("waxing crescent")?"\uD83C\uDF12":t.includes("first quarter")?"\uD83C\uDF13":t.includes("waxing gibbous")?"\uD83C\uDF14":t.includes("full")?"\uD83C\uDF15":t.includes("waning gibbous")?"\uD83C\uDF16":t.includes("last quarter")?"\uD83C\uDF17":t.includes("waning crescent")?"\uD83C\uDF18":"\uD83C\uDF11"})(t.moonPhase.phase)}),(0,r.jsx)("p",{className:"text-lg font-semibold ".concat(er.text),children:t.moonPhase.phase})]}),(0,r.jsxs)("p",{className:"text-sm font-medium ".concat(er.secondaryText),children:[t.moonPhase.illumination,"% illuminated"]})]})]})]}),(0,r.jsx)(x.fF,{weather:t,theme:e}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.wQ,{forecast:t.forecast.map(e=>({...e,country:t.country})),theme:e,onDayClick:e=>{K(U===e?null:e)},selectedDay:U}),(0,r.jsx)(x.st,{forecast:t.forecast.map(e=>({...e,country:t.country})),theme:e,selectedDay:U,currentWeatherData:{humidity:t.humidity,wind:t.wind,pressure:t.pressure,uvIndex:t.uvIndex,sunrise:t.sunrise,sunset:t.sunset}})]})]}),(0,r.jsxs)("div",{className:(0,s.cn)("mt-16 pt-8 border-t-2 text-center","dark"===e&&"border-[#00d4ff]","miami"===e&&"border-[#ff1493]","tron"===e&&"border-[#00FFFF]"),children:[(0,r.jsx)("h2",{className:(0,s.cn)("text-lg font-bold mb-4 uppercase tracking-wider font-mono","dark"===e&&"text-[#00d4ff]","miami"===e&&"text-[#ff1493]","tron"===e&&"text-[#00FFFF]"),children:"WEATHER BY CITY"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 max-w-4xl mx-auto",children:[(0,r.jsx)("a",{href:"/weather/new-york-ny",className:(0,s.cn)("block px-3 py-2 text-sm font-mono rounded border transition-colors","dark"===e&&"border-[#00d4ff] text-[#e0e0e0] hover:bg-[#00d4ff] hover:text-[#0f0f0f]","miami"===e&&"border-[#ff1493] text-[#00ffff] hover:bg-[#ff1493] hover:text-[#0a0025]","tron"===e&&"border-[#00FFFF] text-white hover:bg-[#00FFFF] hover:text-black"),children:"NEW YORK"}),(0,r.jsx)("a",{href:"/weather/los-angeles-ca",className:(0,s.cn)("block px-3 py-2 text-sm font-mono rounded border transition-colors","dark"===e&&"border-[#00d4ff] text-[#e0e0e0] hover:bg-[#00d4ff] hover:text-[#0f0f0f]","miami"===e&&"border-[#ff1493] text-[#00ffff] hover:bg-[#ff1493] hover:text-[#0a0025]","tron"===e&&"border-[#00FFFF] text-white hover:bg-[#00FFFF] hover:text-black"),children:"LOS ANGELES"}),(0,r.jsx)("a",{href:"/weather/chicago-il",className:(0,s.cn)("block px-3 py-2 text-sm font-mono rounded border transition-colors","dark"===e&&"border-[#00d4ff] text-[#e0e0e0] hover:bg-[#00d4ff] hover:text-[#0f0f0f]","miami"===e&&"border-[#ff1493] text-[#00ffff] hover:bg-[#ff1493] hover:text-[#0a0025]","tron"===e&&"border-[#00FFFF] text-white hover:bg-[#00FFFF] hover:text-black"),children:"CHICAGO"}),(0,r.jsx)("a",{href:"/weather/houston-tx",className:(0,s.cn)("block px-3 py-2 text-sm font-mono rounded border transition-colors","dark"===e&&"border-[#00d4ff] text-[#e0e0e0] hover:bg-[#00d4ff] hover:text-[#0f0f0f]","miami"===e&&"border-[#ff1493] text-[#00ffff] hover:bg-[#ff1493] hover:text-[#0a0025]","tron"===e&&"border-[#00FFFF] text-white hover:bg-[#00FFFF] hover:text-black"),children:"HOUSTON"}),(0,r.jsx)("a",{href:"/weather/phoenix-az",className:(0,s.cn)("block px-3 py-2 text-sm font-mono rounded border transition-colors","dark"===e&&"border-[#00d4ff] text-[#e0e0e0] hover:bg-[#00d4ff] hover:text-[#0f0f0f]","miami"===e&&"border-[#ff1493] text-[#00ffff] hover:bg-[#ff1493] hover:text-[#0a0025]","tron"===e&&"border-[#00FFFF] text-white hover:bg-[#00FFFF] hover:text-black"),children:"PHOENIX"}),(0,r.jsx)("a",{href:"/weather/philadelphia-pa",className:(0,s.cn)("block px-3 py-2 text-sm font-mono rounded border transition-colors","dark"===e&&"border-[#00d4ff] text-[#e0e0e0] hover:bg-[#00d4ff] hover:text-[#0f0f0f]","miami"===e&&"border-[#ff1493] text-[#00ffff] hover:bg-[#ff1493] hover:text-[#0a0025]","tron"===e&&"border-[#00FFFF] text-white hover:bg-[#00FFFF] hover:text-black"),children:"PHILADELPHIA"}),(0,r.jsx)("a",{href:"/weather/san-antonio-tx",className:(0,s.cn)("block px-3 py-2 text-sm font-mono rounded border transition-colors","dark"===e&&"border-[#00d4ff] text-[#e0e0e0] hover:bg-[#00d4ff] hover:text-[#0f0f0f]","miami"===e&&"border-[#ff1493] text-[#00ffff] hover:bg-[#ff1493] hover:text-[#0a0025]","tron"===e&&"border-[#00FFFF] text-white hover:bg-[#00FFFF] hover:text-black"),children:"SAN ANTONIO"}),(0,r.jsx)("a",{href:"/weather/san-diego-ca",className:(0,s.cn)("block px-3 py-2 text-sm font-mono rounded border transition-colors","dark"===e&&"border-[#00d4ff] text-[#e0e0e0] hover:bg-[#00d4ff] hover:text-[#0f0f0f]","miami"===e&&"border-[#ff1493] text-[#00ffff] hover:bg-[#ff1493] hover:text-[#0a0025]","tron"===e&&"border-[#00FFFF] text-white hover:bg-[#00FFFF] hover:text-black"),children:"SAN DIEGO"}),(0,r.jsx)("a",{href:"/weather/dallas-tx",className:(0,s.cn)("block px-3 py-2 text-sm font-mono rounded border transition-colors","dark"===e&&"border-[#00d4ff] text-[#e0e0e0] hover:bg-[#00d4ff] hover:text-[#0f0f0f]","miami"===e&&"border-[#ff1493] text-[#00ffff] hover:bg-[#ff1493] hover:text-[#0a0025]","tron"===e&&"border-[#00FFFF] text-white hover:bg-[#00FFFF] hover:text-black"),children:"DALLAS"}),(0,r.jsx)("a",{href:"/weather/austin-tx",className:(0,s.cn)("block px-3 py-2 text-sm font-mono rounded border transition-colors","dark"===e&&"border-[#00d4ff] text-[#e0e0e0] hover:bg-[#00d4ff] hover:text-[#0f0f0f]","miami"===e&&"border-[#ff1493] text-[#00ffff] hover:bg-[#ff1493] hover:text-[#0a0025]","tron"===e&&"border-[#00FFFF] text-white hover:bg-[#00FFFF] hover:text-black"),children:"AUSTIN"})]})]})]})}),(0,r.jsx)(d.Analytics,{})]})}function v(){return(0,r.jsx)(y,{})}w?console.log("✅ Google Pollen API key found:",w.substring(0,8)+"..."):(console.warn("⚠️ Google Pollen API key is missing!"),console.warn("Please set either NEXT_PUBLIC_GOOGLE_POLLEN_API_KEY or REACT_APP_GOOGLE_POLLEN_API_KEY environment variable for real pollen data."))},8983:(e,t,o)=>{"use strict";o.d(t,{fF:()=>u,st:()=>f,wQ:()=>h});var r=o(5155),a=o(2115),n=o(1154),s=o(3999);let c=(0,a.lazy)(()=>o.e(208).then(o.bind(o,5208))),i=(0,a.lazy)(()=>o.e(722).then(o.bind(o,3722))),l=(0,a.lazy)(()=>o.e(243).then(o.bind(o,4243)));function d(e){let{theme:t}=e;return(0,r.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,r.jsx)(n.A,{className:(0,s.cn)("h-8 w-8 animate-spin","dark"===t&&"text-blue-500","miami"===t&&"text-pink-500","tron"===t&&"text-cyan-500")}),(0,r.jsx)("span",{className:"ml-2 text-white text-sm",children:"Loading weather data..."})]})}function h(e){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)(d,{theme:e.theme}),children:(0,r.jsx)(c,{...e})})}function f(e){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)(d,{theme:e.theme}),children:(0,r.jsx)(i,{...e})})}function u(e){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)(d,{theme:e.theme}),children:(0,r.jsx)(l,{...e})})}},9159:(e,t,o)=>{"use strict";o.d(t,{N:()=>s,u:()=>n});var r=o(5155),a=o(3999);function n(e){let{children:t,className:o,maxWidth:n="full",padding:s="md"}=e;return(0,r.jsx)("div",{className:(0,a.cn)("container mx-auto w-full",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-6xl",full:"max-w-full"}[n],{none:"",sm:"px-2 py-2",md:"px-4 py-4",lg:"px-6 py-6"}[s],"min-h-0",o),children:t})}function s(e){let{children:t,className:o,cols:n={sm:1,md:2,lg:3}}=e,s=(0,a.cn)("grid gap-4 w-full","grid-cols-".concat(n.sm||1),n.md&&"md:grid-cols-".concat(n.md),n.lg&&"lg:grid-cols-".concat(n.lg),o);return(0,r.jsx)("div",{className:s,children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[477,86,236,603,441,684,358],()=>t(1441)),_N_E=e.O()}]);